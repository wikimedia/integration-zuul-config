- job:
    name: 'ooui-npm-special-node10-plus-composer-docker'
    node: DebianJessieDocker
    concurrent: true
    triggers:
     - zuul
    builders:
     - docker-castor-load
     - docker-log-dir
     - docker-src-dir
     - docker-ci-src-setup-simple
     - docker-run-with-log-cache-src:
         image: docker-registry.wikimedia.org/releng/quibble-stretch:0.0.32
         options: 'jenkins'
         logdir: '/log'
    archive:
     - archive-log-allow-empty
     - docker-cleanup

- project:
    name: oojs-ui
    jobs:
        - '{name}-npm-run-{script}-node-6-docker':
            docker_image_var: docker-registry.wikimedia.org/releng/npm-test-oojsui:0.2.2
            # 'npm jenkins' also runs composer under Zend PHP 7.0
            script:
                - jenkins
        - '{name}-rake-docker'

- project:
    name: oojs-core
    jobs:
        - '{name}-node10-browser-docker'

- project:
    name: oojs-router
    jobs:
        - '{name}-node10-browser-docker'
