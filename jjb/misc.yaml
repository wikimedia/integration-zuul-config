- job:
    name: 'unicodejs-publish'
    node: contintLabsSlave && UbuntuTrusty
    defaults: use-remoteonly-zuul
    concurrent: false
    triggers:
     - zuul
    builders:
     - jsduck
     - doc-publish:
        docsrc: 'docs'
        docdest: 'unicodejs/$ZUUL_BRANCH'
     - npm-install
     - npm-run-test
     - cover-publish:
        src: 'coverage'
        dest: 'unicodejs'

- project:
    name: 'unicodejs'
    jobs:
     - 'unicodejs-publish'

- job:
    name: 'oojs-core-publish'
    node: contintLabsSlave && UbuntuTrusty
    defaults: use-remoteonly-zuul
    concurrent: false
    triggers:
     - zuul
    builders:
     - npm-install
     - npm-run-doc
     - doc-publish:
        docsrc: 'docs'
        docdest: 'oojs/$ZUUL_BRANCH'
     - npm-run-test
     - cover-publish:
        src: 'coverage'
        dest: 'oojs'
    publishers:
     - global-teardown

- project:
    name: 'oojs-core'
    jobs:
     - 'oojs-core-publish'

- job:
    name: 'oojs-ui-publish'
    node: contintLabsSlave && UbuntuTrusty
    defaults: use-remoteonly-zuul
    concurrent: false
    triggers:
     - zuul
    builders:
     - npm-install
     - npm-run-doc
     - doc-publish:
        docsrc: 'docs'
        docdest: 'oojs-ui/$ZUUL_BRANCH'
     - npm-run-test
     - cover-publish:
        src: 'coverage'
        dest: 'oojs-ui'
    publishers:
     - global-teardown

- project:
    name: 'oojs-ui'
    jobs:
     - 'oojs-ui-publish'

- job:
    name: 'cdb-publish'
    node: contintLabsSlave && UbuntuTrusty
    defaults: use-remoteonly-zuul
    concurrent: false
    triggers:
     - zuul
    builders:
     - global-setup
     - doxygen
     - doc-publish:
        docsrc: 'doc/html'
        docdest: 'cdb/$ZUUL_BRANCH'
     - composer-update
     - phpunit-coverage
     - cover-publish:
        src: 'coverage'
        dest: 'cdb'
    publishers:
     - global-teardown

- project:
    name: 'cdb'
    jobs:
     - 'cdb-publish'
