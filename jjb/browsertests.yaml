# YAML structure to define email recipients aliases
- notification-emails:
    name: listofemails  # a 'name' is required by JJB.
    lists:
     - Wikidata: &emails-Wikidata-qa
        christoph.fischer@wikimedia.de qa-alerts@lists.wikimedia.org tobias.gritschacher@wikimedia.de adrian.heine@wikimedia.de

     - Wikidata-devs: &emails-Wikidata-devs
        christoph.fischer@wikimedia.de katie.filbert@wikimedia.de qa-alerts@lists.wikimedia.org tobias.gritschacher@wikimedia.de

# UploadWizard
- project:
    name: UploadWizard-api
    defaults: browsertests
    repository: mediawiki/extensions/UploadWizard

    jobs:
     - 'UploadWizard-api-{mediawiki_url}':
        mediawiki_credentials_id: Selenium_user-at-beta.wmflabs.org
        mediawiki_url: commons.wikimedia.beta.wmflabs.org
        pollscm: '* * * * *'

# Wikidata
- project:
    name: WikidataTestsSauce
    defaults: browsertests
    browser: firefox
    folder: tests
    headless: 'false'
    mediawiki_credentials_id: WikidataTester-at-beta.wmflabs.org
    mediawiki_url: wikidata.beta.wmflabs.org
    platform: linux
    recipients: *emails-Wikidata-qa
    repository: WikidataBrowserTests.git
    repository_host: github.com/wmde

    jobs:
      - 'browsertests-Wikidata-{name}-{platform}-{browser}-sauce':
         name: WikidataTests
         browsertest_job_timeout: '240'
      - 'browsertests-Wikidata-{name}-{platform}-{browser}-sauce':
         name: WikidataTests
         browser: chrome
         browsertest_job_timeout: '240'

      - 'browsertests-Wikidata-{name}-{platform}-{browser}-sauce':
         name: SmokeTests
         cucumber_tags: '@smoke'
         recipients: *emails-Wikidata-devs

- project:
    name: WikidataTests-Group0
    defaults: browsertests
    folder: tests
    headless: 'false'
    mediawiki_credentials_id: WikidataTester-at-test.wikidata.org
    mediawiki_url: test.wikidata.org
    platform: linux
    recipients: *emails-Wikidata-qa
    repository: WikidataBrowserTests.git
    repository_host: github.com/wmde
    browsertest_job_timeout: '240'
    # TODO
    cucumber_tags: '@wikidata.beta.wmflabs.org'

    jobs:
      - 'browsertests-Wikidata-{name}-{platform}-{browser}-sauce':
         browser:
           - firefox
           - chrome
      - 'browsertests-Wikidata-{name}-{platform}-{browser}-sauce':
         name: WikidataTests-Group0-SmokeTests
         browser: firefox
         cucumber_tags: '@smoke'

- project:
    name: WikidataTestsHeadless
    defaults: browsertests
    browser: firefox
    folder: tests
    headless: 'true'
    mediawiki_credentials_id: WikidataTester-at-beta.wmflabs.org
    mediawiki_url: wikidata.beta.wmflabs.org
    platform: linux
    recipients: *emails-Wikidata-qa
    repository: WikidataBrowserTests.git
    repository_host: github.com/wmde

    jobs:
      - 'browsertests-Wikidata-{name}-{platform}-{browser}':
         name: WikidataTests
         browsertest_job_timeout: '240'
      - 'browsertests-Wikidata-{name}-{platform}-{browser}':
         name: SmokeTests
         cucumber_tags: '@smoke'
         recipients: *emails-Wikidata-devs

- project:
    name: Wikibase-Beta
    defaults: browsertests
    folder: tests
    headless: 'false'
    mediawiki_credentials_id: WikidataTester-at-beta.wmflabs.org
    mediawiki_url: wikidata.beta.wmflabs.org
    platform: linux
    recipients: *emails-Wikidata-qa
    repository: mediawiki/extensions/Wikibase
    browsertest_job_timeout: '240'

    jobs:
      - 'browsertests-Wikidata-{name}-{platform}-{browser}-sauce':
         browser:
           - firefox
           - chrome

- project:
    name: Wikibase-Group0
    defaults: browsertests
    folder: tests
    headless: 'false'
    mediawiki_credentials_id: WikidataTester-at-test.wikidata.org
    mediawiki_url: test.wikidata.org
    platform: linux
    recipients: *emails-Wikidata-qa
    repository: mediawiki/extensions/Wikibase
    browsertest_job_timeout: '240'
    # TODO
    cucumber_tags: '@wikidata.beta.wmflabs.org'

    jobs:
      - 'browsertests-Wikidata-{name}-{platform}-{browser}-sauce':
         browser:
           - firefox
           - chrome
