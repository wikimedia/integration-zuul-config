FROM docker-registry.wikimedia.org/wikimedia-jessie:latest

# Create the WikiMedia Cloud Service user used by CI
ENV WMCS_UID=2947 \
    WMCS_GID=500 \
    WMCS_GROUP=wikidev
RUN groupadd -g "$WMCS_GID" "$WMCS_GROUP" && \
    useradd -u "$WMCS_UID" -g "$WMCS_GID" \
        --home-dir /var/lib/jenkins \
        --create-home jenkins

# Locale generation, auto generated by installing 'locales'
RUN apt-get update && \
    echo "en_US.UTF-8 UTF-8" > /etc/locale.gen && \
    DEBIAN_FRONTEND=noninteractive apt-get install \
        --yes --no-install-recommends \
            locales \
    && \
    rm -rf /var/lib/apt/lists/*

ENV LANG='en_US.UTF-8' LANGUAGE='en_US:en' LC_ALL='en_US.UTF-8'
