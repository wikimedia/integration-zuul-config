FROM docker-registry.wikimedia.org/wikimedia-stretch:latest

# Keep the following in sync with ci-stretch
ARG DEBIAN_FRONTEND=noninteractive

# Cache directory, honored by multiple softwares
ENV XDG_CACHE_HOME=/cache

RUN install --directory --mode 777 "${XDG_CACHE_HOME}" /log /src

# Locale generation, auto generated by installing 'locales'
RUN apt-get update && \
    echo "en_US.UTF-8 UTF-8" > /etc/locale.gen && \
    apt-get install --yes --no-install-recommends \
            ca-certificates \
            git \
            locales \
    && \
    rm -rf /var/lib/apt/lists/*

ENV LANG='en_US.UTF-8' LANGUAGE='en_US:en' LC_ALL='en_US.UTF-8'
