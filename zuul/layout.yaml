# vim: set ts=2 sw=2 et ai foldmethod=indent:
#
# This is the Zuul configuration file for the Wikimedia Foundation.
#
# Zuul configuration is organised in three main sections:
#
# - pipelines: Abstracts incoming Gerrit events and what to report back in Gerrit.
#
# - jobs: Override the pipeline configuration on a per job basis.
#    This is how we specify behaviour for individual projects and jobs.
#
#    If a job matches multiple names or regexes in 'jobs', then all matching settings
#    will be applied in order. Each property (e.g. 'voting', and 'skip-if') can only
#    be set (values are NOT merged). The last one wins.
#
#    Given a job 'foo-bar', and the following jobs overrides:
#
#    jobs:
#    - name: ^foo-
#      voting: false    # wins
#      skip-if:
#        - project: one # loses!
#    - name: -bar$
#      skip-if:
#        - project: two # wins
#
#   Will make job 'foo-bar' non-voting, and skipped for project 'two'.
#
# - projects: For each project we specify what jobs to run, in what order jobs
#    should depend on each other and for which pipelines the jobs should run.
#
# See also upstream documentation:
# - http://ci.openstack.org/zuul/zuul.html#layout-yaml
# - http://ci.openstack.org/zuul/zuul.html#configuration

includes:
  - python-file: 'parameter_functions.py'


pipelines:

  # Elaborate execution run only after CR+2 or when submitted by a whitelisted
  # user. Votes V+2.
  - &test_pipeline
    name: test
    description: >
      Pipeline for jobs on patch submission that will apply the "Verified" score in Gerrit.
      To retry these jobs, submit the comment "recheck".
    manager: IndependentPipelineManager
    source: gerrit
    trigger:
      gerrit:
        - &test-event-patchset-created
          event: patchset-created
          branch: (?!^refs/meta/config|^fundraising/REL|^wmf/\d\.\d{2}\.\d-wmf\.\d{1,2}|^REL)

          # BEWARE:
          # - Make sure to use non greedy selectors (.*?) and to escape dots: \.

          email: &email_whitelist
           - .*?@wikimedia\.(org|de|se)$
           - .*?@hallowelt\.(biz|com)$
           - .*?@shoutwiki\.com$
           - .*?@uncyclomedia\.co$

          # WMF staff & contractors:
           - ^abijeetpatro@gmail\.com$ # Abijeet Patro; Language Engineering Team
           - ^amir\.aharoni@mail\.huji\.ac\.il$ # Amir Aharoni; Language Engineering Team
           - ^andrew\.green\.df@gmail\.com$ # Andrew Green; Fundraising Technology Team
           - ^anomie\.wikipedia@gmail\.com$ # Brad Jorsh (anomie); Core Platform Team
           - ^art\.baltai@speedandfunction\.com$ # Art Baltai; Core Platform Team contractor
           - ^ayg@aryeh\.name$ # Aryeh Gregor (simetrical); Core Platform Team
           - ^bawolff\+wn@gmail\.com$ # Brian Wolff; Security Team
           - ^david@troi\.org$ # David Chan; Editing Team
           - ^git@samsmith\.io$ # Sam Smith; Reading Web Team
           - ^hashar@free\.fr$ # Antoine Musso; Release Engineering Team
           - ^igorkim78@gmail\.com$ # Igor Kim; Search Platform contractor
           - ^jamesmhare@gmail\.com$ # James Hare (harej); Technical Engagement Team
           - ^kartik\.mistry@gmail\.com$ # Kartik Mistry; Language Engineering Team
           - ^krinklemail@gmail\.com$ # Timo Tijhof; Performance Team
           - ^legoktm@member\.fsf\.org$ # Kunal Mehta; Core Platform Team
           - ^marielle\.volz@gmail\.com$ # Marielle Volz; Editing Team
           - ^maxsem\.wiki@gmail\.com$ # Max Seminik; Community Tech Team
           - ^moriel@gmail\.com$ # Moriel Schottlender; Community Tech Team
           - ^mtraceur@member\.fsf\.org$ # Mark Holmquish; Multimedia Team
           - ^ejegg@ejegg\.com$ # Elliott Eggleston; Fundraising Tech Team
           - ^musikanimal@gmail\.com$ # Leon Ziemba; Community Tech Team
           - ^niharikakohli29@gmail\.com$ # Niharika Kohli; Anti-Harrassment Tools Team
           - ^niklas\.laxstrom@gmail\.com$ # Niklas Laxström (nikerabbit); Language Engineering Team
           - ^peter\.ovchyn@speedandfunction\.com$ # Peter Ovchyn; Core Platform Team contractor
           - ^roan\.kattouw@gmail\.com$ # Roan Kattouw; Growth Team
           - ^sam@samwilson\.id\.au$ # Sam Wilson; Community Tech Team
           - ^santhosh\.thottingal@gmail\.com$ # Santhosh Thottingal; Language Engineering Team
           - ^srishakatux@gmail\.com$ # Srishti Sethi; Technical Engagement Team
           - ^thalia\.e\.chan@googlemail\.com$ # Thalia Chan; Anti-Harrassment Tools Team

          # WMDE:
           - ^addshorewiki@gmail\.com$
           - ^aude\.wiki@gmail\.com$
           - ^christoph\.neuroth@gmail\.com$
           - ^hoo@online\.de$
           - ^mail@lucaswerkmeister\.de$

          # VistaPrint
          # They are heavily using MediaWiki internally and open sourced
          # some of their extensions. Might wildcard them as well, for
          # now just whitelist Daniel Renfro.
           - ^drenfro@vistaprint\.com$ # AlephNull

          # Trusted long term users:
           - ^0freerunning@gmail\.com$ # Jayprakash12345
           - ^6020peaks@gmail\.com$ # Hackathon 2017
           - ^aarcos\.wiki@gmail\.com$
           - ^adamr_carter@btinternet\.com$ # UltrasonicNXT
           - ^admin@glados\.cc$ # Unicodesnowman
           - ^sarhan.alaa@protonmail.com # Alaa Sarhan
           - ^alangiderick@gmail\.com$ # D3r1ck01, will remove soon
           - ^ammarpad@yahoo\.com$
           - ^andre\.greiner-petter@t-online\.de$ # AndreG-P
           - ^agboreugene@gmail\.com$
           - ^cblair91@gmail\.com$ # Cblair91 -- mw/ext/ImportArticles
           - ^AronManning5@gmail\.com$ # Aron S
           - ^anirudh24seven@gmail\.com$ # Anirudh S
           - ^antonin@delpeuch\.eu$ # Pintoch
           - ^asthana\.sumit23@gmail\.com$ # Sumit
           - ^beauleetienne0@gmail\.com$ # Ebe123
           - ^benapetr@gmail\.com$ # petrb
           - ^benestar\.wikimedia@gmail\.com$
           - ^bryan\.tongminh@gmail\.com$
           - ^cenarium\.sysop@gmail\.com$ # Cenarium
           - ^chicocvenancio@gmail\.com$ # Chico Venancio
           - ^christian@quelltextlich\.at$
           - ^cindom@gmail\.com$
           - ^codereview@emsenhuber\.ch$
           - ^CommodoreFabianus@gmx\.de$ # XZise, Pywikibot maintainer
           - ^d_entous@yahoo\.com$
           - ^daimona\.wiki@gmail\.com$ # Daimona Eaytoy
           - ^daniel@nadir-seen-fire\.com$
           - ^daniel\.rey\.lopez@gmail\.com$
           - ^DannyS712\.enwiki@gmail.com$
           - ^datguysteam@gmail\.com$ # DatGuy
           - ^davidabian@wikimedia\.es$
           - ^dereckson@espace-win\.org$
           - ^devunt@gmail\.com$
           - ^dvorapa@seznam\.cz$
           - ^ebrahim@gnu\.org$
           - ^edwardspec@gmail\.com$ # Edward Chernenko
           - ^eloquence@gmail\.com$
           - ^eranroz89@gmail\.com$ # Eran Roz
           - ^estherakinloose@gmail\.com$ # Esther Akinloose
           - ^evad37@gmail\.com$ # Evad37
           - ^federicoleva@tiscali\.it$ # Nemo bis
           - ^florian\.schmidt\.stargatewissen@gmail\.com$
           - ^fomafix@googlemail\.com$
           - ^framawiki@tools\.wmflabs\.org$
           - ^geofbot@gmail\.com$
           - ^geoffreytrang@gmail\.com$
           - ^gifti@tools\.wmflabs\.org$
           - ^glaisher\.wiki@gmail\.com$
           - ^god\.vedmaka@gmail\.com$ # Vedmaka Wakalaka
           - ^gopavasanth1999@gmail\.com # Gopavasanth
           - ^hannes@octofox\.de$ # Octfx
           - ^hartman\.wiki@gmail\.com$
           - ^hgasuser@gmail\.com$ # MGChecker
           - ^hi@tassu\.me$ # Majavah
           - ^huji\.huji@gmail\.com$
           - ^hydriz@jorked\.com$ # Hydriz
           - ^info@gno\.de$ # Xqt, Pywikibot maintainer
           - ^i\.leturia@elhuyar\.eus$
           - ^jamesmontalvo3@gmail\.com$ # jamesmontalvo3
           - ^jamesin\.hongkong\.1@gmail\.com$ # Mwjames
           - ^jackmcbarn@gmail\.com$ # Jackmcbarn
           - ^jan@berkel\.fr$ # Jberkel
           - ^jan\.wikimedia@zerebecki\.de$ # Jan Zerebecki
           - ^jarry1250@gmail\.com$
           - ^jayvdb@gmail\.com$
           - ^jeanfrederic\.wiki@gmail\.com$
           - ^jeblad@gmail\.com$
           - ^jeff\.janes@gmail\.com$
           - ^jeroendedauw@gmail\.com$
           - ^jhobbs14@msudenver\.edu$
           - ^jhsoby@gmail\.com$
           - ^JJMC89\.Wikimedia@gmail\.com$ # JJMC89
           - ^johanna\.m\.mayr@gmail\.com$
           - ^jorgekasa@gmail\.com$
           - ^julien\.inbox\.wiki@gmail\.com$ # JGirault
           - ^juniorsys_wikimedia@outlook\.com$
           - ^kaarticsivaraam91196@gmail\.com$
           - ^karsten@hoffmeyer\.info$ # Kghbln
           - ^krenair@gmail\.com$
           - ^k\.s\.werf@hotmail\.com$
           - ^kumariankita002@gmail\.com$
           - ^[lL]adsgroup@gmail\.com$
           - ^lewis@lewiscawte\.me$
           - ^liangent@gmail\.com$
           - ^lokal\.profil@gmail\.com$
           - ^lorentz0021@gmail\.com$
           - ^lucie\.kaffee@gmail\.com$
           - ^luke@faraone\.cc$
           - ^luke081515@web\.de$
           - ^l\.verhovskij@gmail\.com$ # Ljonka
           - ^mah@nichework\.com$
           - ^mail@wikinaut\.de$
           - ^majorjohn1@mail\.com$ # TheSandDoctor
           - ^mapreader@olum\.org$ # Pppery
           - ^marc@uberbox\.org$
           - ^markus@semantic-mediawiki\.org$
           - ^maroloccio@gmail\.com$
           - ^martin@urbanec\.cz$ # Urbanecm
           - ^martin\.urbanec@wikimedia\.cz$
           - ^martineznovo@gmail\.com$ # Ciencia Al Poder
           - ^matanya\.moses@gmail\.com$
           - ^matanya@foss\.co\.il$
           - ^matejsuchanek97@gmail\.com$
           - ^matma\.rex@gmail\.com$
           - ^maurelio@tools\.wmflabs\.org$ # MarcoAurelio
           - ^mbch331\.wikipedia@gmail\.com$ # Mbch331
           - ^mediawiki@kghoffmeyer\.de$ # Kghbln
           - ^Megadev44s\.mail@gmail\.com$ # Zppix
           - ^misterstrad@gmail\.com$ # Mr. Stradivarius
           - ^mjbmri@gmail\.com$
           - ^mlazowik@gmail\.com$
           - ^mr7060@mail\.com$
           - ^mszabo@wikia-inc\.com$
           - ^mxn@1ec5\.org$ # Minh Nguyen T139345
           - ^nikitarana360@gmail\.com # Nikitrain
           - ^nilesh@nileshc\.com$
           - ^ole\.yves@gmail\.com$
           - ^oliver\.buchtala@gmail\.com$ # Substance.io developer
           - ^orbit@framezero\.com$ # Christian Williams
           - ^osorio\.juan@microsoft\.com$
           - ^ostrzycielnozyczek@gmail\.com$
           - ^pastakhov@yandex\.ru$ # PhpTags maintainer
           - ^paulfkeffer@gmail\.com # MacFan4000
           - ^platonides@gmail\.com$
           - ^pleasestand@live\.com$
           - ^pragun06@gmail\.com$
           - ^purodha@blissenbach\.org$
           - ^raimond\.spekking@gmail\.com$
           - ^razesoldier@outlook\.com$ # RazeSoldier / 星耀晨曦
           - ^rillke@wikipedia\.de$
           - ^robinp\.1273@gmail\.com$
           - ^saper@saper\.info$
           - ^sam@tntnet\.uk$ # samtar
           - ^se4598@gmx\.de$
           - ^seb35@seb35\.fr$
           - ^samanthanguyen1116@gmail\.com$ # SamanthaNguyen
           - ^samrhilson@gmail\.com$ # ValeryanM
           - ^samuelguebo@gmail\.com$ # awmd-stats maintainer
           - ^schenonef@gmail\.com$  # Sophivorus
           - ^shahyar@gmail\.com$
           - ^sm-git@riseup\.net$ # Shreyas Minocha / shreyasminocha
           - ^siebrand@kitano\.nl$
           - ^Simon\.Legner@gmail\.com$
           - ^sjoerddebruin@me\.com$
           - ^skizzerz@skizzerz\.net$
           - ^sorawee\.pwase@gmail\.com$ # Nullzero
           - ^strayblues@gmail\.com$ # Hagar Shilo
           - ^strigiwm@gmail\.com$ # MarcoAurelio
           - ^sucheta\.ghoshal@gmail\.com$
           - ^s7eph4n@protonmail\.com$ # Foxtrott
           - ^tacsipacsi@jnet\.hu$
           - ^tasneem\.lo\.31@gmail\.com$
           - ^thomasmulhall410@yahoo\.com$ # Paladox T114528
           - ^thomaspt@hotmail\.fr$
           - ^[Tt]ulsibhagat50@gmail\.com$ # Tulsi Bhagat
           - ^at\.light@live\.com\.au$ # This, that and the other
           - ^terppa05@gmail\.com$ # pjht
           - ^terracodes@outlook\.com$ # TerraCodes
           - ^terracodes@tools\.wmflabs\.org$ # Secondary mail of user TerraCodes
           - ^tomasz@twkozlowski\.com$
           - ^trevorparscal@gmail\.com$
           - ^01tonythomas@gmail\.com$
           - ^tim@tim-landscheidt\.de$
           - ^tinajohnson\.1234@gmail\.com$
           - ^tools\.slf@tools\.wmflabs\.org # SLF Bot script for extension-SecureLinkFixer
           - ^tosfos@yahoo\.com$ # tosfos
           - ^tur\.neslihan@gmail\.com$ # Nes / Neslihan
           - ^tylerromeo@gmail\.com$
           - ^umherirrender_de\.wp@web\.de$
           - ^utilizator\.receptie123@gmail\.com$
           - ^v\.a\.ghaisas@gmail\.com$ # polybuildr
           - ^valhallasw@arctus\.nl$ # Merlijn van Deen
           - ^vikasyaligar\.it@gmail\.com$ # Vikas Yaligar
           - ^vincent\.privat@gmail\.com$ # Don-vip
           - ^viztor@tools\.wmflabs\.org$
           - ^w@mzmcbride\.com$
           - ^washuu@gmail\.com$ # Alexia
           - ^wctaiwan@gmail\.com$
           - ^wiki@physikerwelt\.de$
           - ^wiki@revi\.dev$ # revi
           - ^wikimedia\.org@eddie-sh\.de$ # EddieGP
           - ^wugapodes@aol\.com$
           - ^xsavitar\.wiki@aol\.com # D3r1ck01
           - ^yaron57@gmail\.com$
           - ^yash\.girdhar@gmail\.com$ # yash / yashasvi
           - ^yuriastrakhan@gmail\.com$
           - ^yuvipanda@gmail\.com$
           - ^zhorishna@gmail\.com$ # Isarra
           - ^zhuyifei1999@gmail\.com$
           - ^zorandori4444@gmail\.com$ # Zoranzoki21
           - ^mwalker@khaosdev\.com$ # Matt Walker
           - ^webmelos@gmail\.com$ # Melos
           - ^wikitech\.rxy@rxy\.jp$ # Rxy
           - ^lacrymarum\.valle@gmail\.com$ # Candalua

           # Pywikibot related
           - ^alexsh@mail2000\.com\.tw$  # Alex S.H. Lin
           - ^dalba\.wiki@gmail\.com$
           - ^loic@dachary\.org$
           - ^dr\.trigon@surfeu\.ch$  # DrTrigon
           - ^happy5214@gmail\.com$
           - ^maarten@mdammers\.nl$  # Multichill
           - ^malafaya@clix\.pt$
           - ^mpaa\.wiki@gmail\.com$
           - ^nullzero\.free@gmail\.com$
           - ^pyfisch@gmail\.com$
           - ^ricordisamoa@disroot\.org$
           - ^russblau@imapmail\.org$  # Russell Blau
           - ^whym@whym\.org$
           - ^wiki@strainu\.ro$  # Strainu
           - ^wikiposta@gmail\.com$  # Bináris

          # Parsoid Outreachy interns
           - ^bebirchall@gmail\.com$
           - ^ecokpo@gmail\.com$
           - ^maria\.pacana@gmail\.com$

          # GSoC students!
           - ^hardikjuneja\.hj@gmail\.com$
           - ^xietaoecho@gmail\.com$ # Lethexie
           - ^hbhyrava@gmail\.com$ # Darthbhyrava
           - ^amrit\.sreekumar@gmail\.com$ # amritsreekumar
           - ^prssud@gmail\.com$ # Prssanna
           - ^shivanshbindal603@gmail\.com$ # Shivanshbindal9

          # GCI students!
          # Note that Google rules strongly advise against giving personal information such as your name.
           - ^arcaynnnnnn@gmail\.com$ # arcayn/arcaynia
           - ^bennixerus@gmail\.com$ # IAmNetx
           - ^bmp2558@gmail\.com$ # Georggi
           - ^brandfowl@gmail\.com$ # BrandonXLF
           - ^CharmindYT@gmail\.com$ # Flutterish
           - ^crazy4sb@gmail\.com$ # unicornisaurous
           - ^divad\.nnamtdeis@gmail\.com$ # Divadsn
           - ^eflyjason@gmail\.com$ # Yifei He
           - ^rj23@protonmail\.com$ # Filip
           - ^gianiskido@gmail\.com$ # IoannisKydonis
           - ^i@ananayarora\.com$
           - ^juliusalphonso\.09@gmail\.com$ # JadeMaveric
           - ^justin\.d128@gmail\.com$ # MtDu
           - ^kohpirong@gmail\.com$ # Pipix
           - ^krzysiek\.witucki55@gmail\.com$ # n3rsti
           - ^luk\.bukkit@gmail\.com$ # LukBukkit
           - ^mdabusiyam009@gmail\.com$ # TechneSiyam
           - ^mhutti1@gmail\.com$
           - ^minhducsun2002@gmail\.com$ # minhducsun2002
           - ^nathanklumpenaar10@outlook\.com$
           - ^nguyen\.jeremyt@gmail\.com$ # JeremyNguyen
           - ^nikitav30@gmail\.com$ # Phantom42
           - ^nils\.andre\.chang@gmail\.com$ #zD/Zd1LqRH
           - ^pranavmk98@gmail\.com$ # PranavK
           - ^rafidteam@gmail\.com$ # Rafidaslam
           - ^rj23@protonmail\.com$ # Filip / rlot
           - ^safan25641@gmail\.com$ # Safan41
           - ^samohasmoha07@gmail\.com$ # Mogmog123
           - ^stevenvandenwildenberg@gmail\.com$ # TheJair / Stibba
           - ^takidelfin@gmail\.com$ # takidelfin
           - ^terppa05@gmail\.com$ # pjht
           - ^victorbarbu08@gmail\.com$ # Victorbarbu
           - ^wikimedia@bjorn\.ml$ # Bjornskjald
           - ^w\.albert221@gmail\.com$ # Albert221
           - ^manuelalcarazzam@gmail\.com$ # alcarazzam
           - ^nicholasgregory@live\.co\.uk$ # NicholasG04
           - ^wikimedia@ptrcnull\.me$ # ptrcnull
           - ^wikimedia@retrocraft\.ca$ # RetroCraft

          # Outreachy interns/applicants
           - ^elaarad@gmail\.com$ # Foxy brown
           - ^smarita\.sharma2015@vit\.ac\.in$
           - ^gneha21@yahoo\.in$
           - ^samikshya\.chand\.ece15@iitbhu\.ac\.in$
           - ^tekenoella94@gmail\.com$
           - ^thinkcolorful@thinkcolorful\.org$
           - ^vinithacse@gmail\.com$ # Groovier1
           - ^nj4710@gmail\.com$  # Neha Jha (Round 15)

         # Hackathon participants
           - ^edlira\.dushku@gmail\.com$

        # Let whitelisted users the ability to reenqueue a change in the test
        # pipeline by simply commenting 'recheck' on a change.
        - &test-event-comment-recheck
          event: comment-added
          branch: (?!^refs/meta/config|^fundraising/REL|^wmf/\d\.\d{2}\.\d-wmf\.\d{1,2}|^REL)
          comment: (?im)^Patch Set \d+:( -?Code\-Review(\+|-)?(1|2)?)?(\n\n\(\d+ comment(s)?\))?\n\n\s*recheck\b
          email: *email_whitelist

        # Let whitelisted users CR+1 to trigger tests for an untested patch
        # (Verified 0 or 1)
        - &test-event-plus-one
          event: comment-added
          branch: (?!^refs/meta/config|^fundraising/REL|wmf/\d\.\d{2}\.\d-wmf\.\d{1,2}|^REL)
          reject-approval:
            # hasn't been tested yet
            - verified: [-1, 2]
          email: *email_whitelist
          approval:
            - code-review: +1

    success-message: 'Main test build succeeded.'
    success:
      gerrit:
        verified: 2
    failure-message: 'Main test build failed.'
    failure:
      gerrit:
        verified: -1

  - !!merge : *test_pipeline
    name: test-prio
    description: >
      Variation of the "test" pipeline reserved for jobs critical to infrastructure deployments and configuration changes.
    precedence: high

  - !!merge : *test_pipeline
    name: test-wmf
    description: >
      Variation of the "test" pipeline reserved for wmf/* branches.
    trigger:
      gerrit:
        - !!merge : *test-event-patchset-created
          branch: wmf/\d\.\d{2}\.\d-wmf\.\d{1,2}
        - !!merge : *test-event-comment-recheck
          branch: wmf/\d\.\d{2}\.\d-wmf\.\d{1,2}
        - !!merge : *test-event-plus-one
          branch: wmf/\d\.\d{2}\.\d-wmf\.\d{1,2}

  - !!merge : *test_pipeline
    name: test-fundraising
    description: >
      Variation of the "test" pipeline reserved for fundraising/REL* branches.
    trigger:
      gerrit:
        - !!merge : *test-event-patchset-created
          branch: ^fundraising/REL
        - !!merge : *test-event-comment-recheck
          branch: ^fundraising/REL
        - !!merge : *test-event-plus-one
          branch: ^fundraising/REL

  - !!merge : *test_pipeline
    name: test-1_31
    description: >
      Variation of the "test" pipeline reserved for MediaWiki 1.31
    trigger:
      gerrit:
        - !!merge : *test-event-patchset-created
          branch: ^REL1_31$
        - !!merge : *test-event-comment-recheck
          branch: ^REL1_31$
        - !!merge : *test-event-plus-one
          branch: ^REL1_31$

  - !!merge : *test_pipeline
    name: test-1_33
    description: >
      Variation of the "test" pipeline reserved for MediaWiki 1.33
    trigger:
      gerrit:
        - !!merge : *test-event-patchset-created
          branch: ^REL1_33$
        - !!merge : *test-event-comment-recheck
          branch: ^REL1_33$
        - !!merge : *test-event-plus-one
          branch: ^REL1_33$

  - !!merge : *test_pipeline
    name: test-1_34
    description: >
      Variation of the "test" pipeline reserved for MediaWiki 1.34
    trigger:
      gerrit:
        - !!merge : *test-event-patchset-created
          branch: ^REL1_34$
        - !!merge : *test-event-comment-recheck
          branch: ^REL1_34$
        - !!merge : *test-event-plus-one
          branch: ^REL1_34$

  # Dedicated pipeline for per-patch coverage report (non-voting)
  - name: coverage
    description: >
      Code coverage checks channel.
      To retry, submit the comment "check coverage".
    manager: IndependentPipelineManager
    source: gerrit
    precedence: low
    trigger:
      gerrit:
        - event: patchset-created
          branch: (?!^refs/meta/config)
          email: *email_whitelist
        - event: comment-added
          comment: (?im)^Patch Set \d+:\n\n\s*check coverage\.?\s*$
          email: *email_whitelist

    success-message: 'PHP test coverage increased (or stayed the same) :-)'
    success:
      gerrit: {}
    failure-message: 'PHP test coverage decreased'
    failure:
      gerrit: {}

  # Dedicated pipeline for per-patch performance report (non-voting)
  - name: patch-performance
    description: >
      Per-patch performance pipeline.
      To retry, submit the comment "check perf".
    manager: IndependentPipelineManager
    source: gerrit
    precedence: low
    trigger:
      gerrit:
        - event: patchset-created
          branch: (?!^refs/meta/config)
          email: *email_whitelist
        - event: comment-added
          comment: (?im)^Patch Set \d+:\n\n\s*check perf\.?\s*$
          email: *email_whitelist
    success-message: 'Performance checks OK! (same or better)'
    success:
      gerrit: {}
    failure-message: 'This patch might be adding a page load cost.'
    failure:
      gerrit: {}

  # Dedicated pipeline for per-patch code health report (non-voting)
  - name: codehealth
    description: >-
      Code health checks channel.
      To retry, submit the comment "check codehealth".
    manager: IndependentPipelineManager
    source: gerrit
    precedence: low
    trigger:
      gerrit:
        - event: patchset-created
          branch: (?!^refs/meta/config)
          email: *email_whitelist
        - event: comment-added
          comment: (?im)^Patch Set \d+:\n\n\s*check codehealth\.?\s*$
          email: *email_whitelist
    # Success is reported via Verified +1 by SonarQube Bot
    # https://gerrit.wikimedia.org/r/admin/projects/labs/tools/sonarqubebot
    # depending on whether the quality gates in SonarQube passed/failed.
    # Failure is reported back to gerrit in case of low-level failures,
    # and not the actual outcome of the SonarQube analysis.
    failure:
      gerrit: {}

  - name: experimental
    description: >
      Pipeline for experimental jobs. These only run after submitting the comment "check experimental".
    manager: IndependentPipelineManager
    source: gerrit
    precedence: low
    trigger:
      gerrit:
        - event: comment-added
          comment: (?im)^Patch Set \d+:\n\n\s*check experimental\.?\s*$
          email: *email_whitelist
    success-message: 'Experimental build succeeded.'
    success:
      gerrit: {}
    failure-message: 'Experimental build failed.'
    failure:
      gerrit: {}

  - name: php
    description: >
      Slower PHPUnit jobs excluded from the "test" pipeline. These also run as part of the "gate-and-submit" pipeline.
      To run them earlier, submit the comment "check php".
    manager: IndependentPipelineManager
    source: gerrit
    trigger:
      gerrit:
        - event: comment-added
          comment: (?im)^Patch Set \d+:\n\n\s*check (php5?|zend|sqlite|postgres)\.?\s*$
          email: *email_whitelist
    success-message: 'PHP build succeeded.'
    success:
      gerrit: {}
    failure-message: 'PHP build failed.'
    failure:
      gerrit: {}

  # The gate that votes on Gerrit and auto-merges commits on success!
  #
  - &gate_and_submit_pipeline
    name: gate-and-submit
    description: >
      Pipeline for the authoritative jobs that start when a Code-Review "+2" score
      is submitted on Gerrit. If these pass, Jenkins will merge the commit.
    manager: DependentPipelineManager
    source: gerrit
    precedence: high
    window: 5  # initial value
    window-floor: 2  # minimum
    require:
      open: True
    trigger:
      gerrit:
        - &gate-and-submit-comment-added
          event: comment-added
          branch:
           - (?!^(refs/meta/config|wmf/\d\.\d{2}\.\d-wmf\.\d{1,2}|fundraising/REL|REL))
          email:
           - ^(?!l10n-bot@translatewiki\.net).*$
          approval:
            - code-review: 2
    start:
      gerrit:
        verified: 0
    success-message: 'Gate pipeline build succeeded.'
    success:
      gerrit:
        verified: 2
        # Let Zuul merge the change \O/
        submit: true
    failure-message: 'Gate pipeline build failed.'
    failure:
      gerrit:
        verified: -1

  # Separate gate for SWAT deployments to reduce congestion.
  - !!merge : *gate_and_submit_pipeline
    name: gate-and-submit-wmf
    description: >
      Same as gate-and-submit but dedicated to wmf/ branches.
    trigger:
      gerrit:
        - event: comment-added
          branch: wmf/\d\.\d{2}\.\d-wmf\.\d{1,2}
          email:
           - ^(?!l10n-bot@translatewiki\.net).*$
          approval:
            - code-review: 2

  # Separate gate for fundraising@REL* branches
  # Saves us from having to set the branch filter on jobs
  - !!merge : *gate_and_submit_pipeline
    name: gate-and-submit-fundraising
    trigger:
      gerrit:
        - !!merge : *gate-and-submit-comment-added
          branch: ^fundraising/REL

  - !!merge : *gate_and_submit_pipeline
    name: gate-and-submit-1_31
    trigger:
      gerrit:
        - !!merge : *gate-and-submit-comment-added
          branch: ^REL1_31

  - !!merge : *gate_and_submit_pipeline
    name: gate-and-submit-1_33
    trigger:
      gerrit:
        - !!merge : *gate-and-submit-comment-added
          branch: ^REL1_33

  - !!merge : *gate_and_submit_pipeline
    name: gate-and-submit-1_34
    trigger:
      gerrit:
        - !!merge : *gate-and-submit-comment-added
          branch: ^REL1_34

  # Separate gate for commits authored by l10n-bot, which run different tests.
  # It also has a lower priority, and improved concurrency (no DependentPipelineManager).
  - !!merge : *gate_and_submit_pipeline
    name: gate-and-submit-l10n
    description: >
      Variation of the "gate-and-submit" pipeline for l10n-bot commits.
    precedence: low
    manager: IndependentPipelineManager
    trigger:
      gerrit:
        - event: comment-added
          branch:
           - (?!^refs/meta/config)
          email:
           - ^l10n-bot@translatewiki\.net$
          approval:
            - code-review: 2

  - name: postmerge
    description: Jobs for after a commit is successfully merged.
    precedence: low
    manager: IndependentPipelineManager
    source: gerrit
    trigger:
      gerrit:
        - event: change-merged
          branch: (?!^refs/meta/config)
    success-message: 'Post-merge build succeeded.'
    # Zuul needs at least one option beside --message or it will not report
    # Since Gerrit 2.8, we can vote on closed changes.
    success:
      gerrit: {}
    failure-message: 'Post-merge build failed.'
    failure:
      gerrit: {}

  - name: post
    description: Jobs for when a branch is created or updated.
    manager: IndependentPipelineManager
    source: gerrit
    trigger:
      gerrit:
       - event: ref-updated
         ref: ^refs/heads/.*$
         ignore-deletes: True

  # Pipeline for tags (either a new one or a removal)
  - name: publish
    description: Jobs for when a tag is created.
    manager: IndependentPipelineManager
    source: gerrit
    trigger:
      gerrit:
       - event: ref-updated
         ref: ^refs/tags/.*$

# Fine tune some jobs
jobs:

  #
  # General
  #

  # Warning: the files regex are using python re.match() which match at the
  # beginning of the filename. '\.js$' will only match '.js' not 'foo.js'.
  #
  # See: http://docs.python.org/2/library/re.html#search-vs-match

  - name: ^.*$
    parameter-function: set_parameters

  - name: ^.*-non-voting$
    voting: false

  - name: trigger-mediawiki-pipeline-publish
    branch: master
    voting: false

  # Pending migration T223348
  - name: wikimedia-fundraising-crm-composer-php72-docker
    voting: false

  - name: ^wmf-quibble-vendor
    # Gated extensions are only for master and Wikimedia deployment. We do not
    # run them on REL branches.
    branch: (?!^REL)
    skip-if:
      - project: ^mediawiki/core$
      - project: ^mediawiki/vendor$

  - name: ^wmf-quibble-core-vendor
    # Gated extensions are only for master and Wikimedia deployment. We do not
    # run them on REL branches.
    branch: (?!^REL)
    skip-if:
      - project: ^mediawiki/extensions/.*$

  - name: ^wmf-quibble-selenium
    # Gated extensions are only for master and Wikimedia deployment. We do not
    # run them on REL branches.
    branch: (?!^REL)

  # Ensure MediaWiki repositories in a dependent pipeline have a queue name.
  # queue-name can not be applied based on a regex, apply the name on most used
  # jobs.
  - name: mediawiki-quibble-composer-mysql-php72-docker
    queue-name: mediawiki

  - name: lintr-docker
    files:
     - '^.*\.R$'

  - name: ^.*rake-docker$
    files:
      # Uses python re.match() which checks at BEGINNING of the string
      - '.*\.pp$'
      - '.*\.rb'
      - '(\.rubocop|.*\.gemspec$|Gemfile)'
      - '.*([Rr]akefile|/spec/)'

  # Same for mediawiki/vagrant
  - name: ^mediawiki-vagrant-rake-docker$
    files:
      - '.*'
  - name: ^puppet-wmf-styleguide-rake-docker$
    files:
      - '.*'

  # Ditto for translatewiki which has puppet modules under /puppet
  - name: ^translatewiki-rake-docker$
    files:
      - '^\.puppet-lint\.rc$'
      - '^puppet/.*'
      - '(^Rakefile$|^Gemfile$)'

  # Experimental building of Debian packages
  # based on jenkins-debian-glue
  - name: ^debian-glue.*
    # Point directly to artifacts
    success-pattern: 'https://integration.wikimedia.org/ci/job/{job.name}/{build.number}/'
    files: 'debian/.*'

  - name: ^gerrit-docker$
    # Point directly to artifacts
    success-pattern: 'https://integration.wikimedia.org/ci/job/{job.name}/{build.number}/'
    branch: ^wmf/.*$

  - name: cumin-tox-publish
    branch: ^master$

  - name: docker-pkg-tox-publish
    branch: ^master$

  - name: spicerack-tox-publish
    branch: ^master$

  - name: homer-tox-publish
    branch: ^master$

  # Tox is for the patch branches, for the debian packaging branch the tests
  # are run by dh_virtualenv.
  - name: integration-zuul-tox-docker
    branch: ^patch-queue/debian/

  - name: ^quibble-donationinterface-REL1_31-php70-docker$
    skip-if:
      - project: ^mediawiki/extensions/DonationInterface$
        branch: ^deployment$


  # Jobs testing multiple extensions together

  # Only run patch coverage if a PHP file was
  # changed on master.
  - name: ^.*-phpunit-coverage-patch
    branch: master
    files:
     - '^.*\.php$'

  - name: mediawiki-fresnel-patch-docker
    # Equivalent to concurrent: false in Jenkins but handled by Zuul instead.
    mutex: mediawiki-fresnel-patch-docker

    branch: master
    # Point to full output instead of default (tail-trimmed) output.
    # This is (oddly) to make the output visually shorter.
    # The reason the full output will be visually shorter is because nothing
    # will be partially cut off, and thus the collapsible sections work.
    #
    # Without this, you land in the middle of 100s of lines of unintersting output.
    #
    # With this, you land at collapsed sections, with right after that "Fresnel result"
    #
    # Format isn't documented AFAIK, but its code is here:
    # https://github.com/wikimedia/integration-zuul/blob/6ca76c5f84/zuul/model.py#L733-L753
    success-pattern: 'https://integration.wikimedia.org/ci/job/{job.name}/{build.number}/consoleFull'
    failure-pattern: 'https://integration.wikimedia.org/ci/job/{job.name}/{build.number}/consoleFull'

  - name: mwext-codehealth-patch
    success-pattern: 'https://sonarcloud.io/dashboard?id=mediawiki-extensions-{build.parameters[EXT_NAME]}&branch={build.parameters[ZUUL_CHANGE]}-{build.parameters[ZUUL_PATCHSET]}&resolved=false'
    failure-pattern: 'https://sonarcloud.io/dashboard?id=mediawiki-extensions-{build.parameters[EXT_NAME]}&branch={build.parameters[ZUUL_CHANGE]}-{build.parameters[ZUUL_PATCHSET]}&resolved=false'

  - name: mwcore-codehealth-patch
    success-pattern: 'https://sonarcloud.io/dashboard?id=mediawiki-core&branch={build.parameters[ZUUL_CHANGE]}-{build.parameters[ZUUL_PATCHSET]}&resolved=false'
    failure-pattern: 'https://sonarcloud.io/dashboard?id=mediawiki-core&branch={build.parameters[ZUUL_CHANGE]}-{build.parameters[ZUUL_PATCHSET]}&resolved=false'

  # For coverage report jobs, we only want one build at a time.
  #
  # That is the equivalent of concurrent: false in Jenkins but handled by Zuul
  # instead.
  - name: mwext-phpunit-coverage-docker-publish
    mutex: mwext-phpunit-coverage-docker-publish

  # Zuul does not know whether a Jenkins job is marked as non concurrent and
  # would thus trigger the associated Gearman function multiple times.
  # The Gearman plugin assign each build to a node and each of its executors
  # are locked waiting for the build to start. Since builds are hold by the
  # Jenkins queue, the node is entirely locked and can not process any other
  # builds.
  #
  # Instead handle the non concurrency at Zuul level using a mutex.
  #
  # T234259
  - name: mwcore-codehealth-master-non-voting
    mutex: mwcore-codehealth-master-non-voting
    # Really restrict to master only
    branch: master
  - name: mwext-codehealth-master-non-voting
    mutex: mwext-codehealth-master-non-voting
    # Really restrict to master only
    branch: master

  - name: mediawiki-core-doxygen-docker-publish
    mutex: mediawiki-core-doxygen-docker-publish

  # Only generate coverage information for master
  - name: ^.*-coverage-(docker-)?publish$
    branch: master

  - name: wikimedia-fundraising-civicrm-docker
    branch: (?!.*deployment.*|^contrib$)

  # Still being tested
  #
  # XXX when making it voting, make sure to uncomment the job from definition
  # from gate-and-submit
  - name: commit-message-validator
    voting: false

  #
  # Individual adjustments
  #

  - name: beta-mediawiki-config-update-eqiad
    branch: ^master$
    success-message: 'SUCCESS Change has been deployed on the EQIAD beta cluster'
    failure-message: 'FAILURE Failed deployment on the EQIAD beta cluster :-/ Please contact a member of the beta project to fixup the working directory on the destination server.'

  - name: mediawiki-vagrant-puppet-doc-publish
    branch: ^master$

  - name: integration-docroot-deploy
    branch: ^master$
    success-message: 'SUCCESS Updated https://integration.wikimedia.org/ . WARN: https://doc.wikimedia.org/ need manual update: <code>ssh doc1001.eqiad.wmnet sudo -u doc-uploader git -C /srv/docroot pull</code>'
    failure-message: 'FAILURE Failed to deploy. Please contact a continuous integration team member to fixup the docroot on the destination server.'

  - name: 'integration-config-jjb-diff-docker'
    success-message: 'SUCCESS Review the XML difference.'
    failure-message: 'FAILURE Failed to compare your patchset with the current configuration.'
    files:
      - '^utils/jjb-diff.sh'
      - '^jjb/.*'
      - '^tox.ini$'

  - name: operations-mw-config-php72-composer-diffConfig-docker
    voting: false
    # Note that the results are the other way around because we're using `git diff --exit-code`.
    success-message: 'FAILURE No change detected against the current configuration.'
    failure-message: 'SUCCESS Please carefully review the change in effective configuration.'

  - name: 'integration-config-zuul-layout-diff-docker'
    voting: false
    # Note how the messages are mixed up. Gotta change the job exit code.
    success-message: 'FAILURE No layout difference. Build'
    failure-message: 'SUCCESS Review the Zuul layout difference. Build'

  - name: 'integration-config-zuul-layout-validate-docker'
    branch: (?!labs)

  - name: 'mwext-node10-docs-docker-publish'
    branch: ^master$

  - name: 'mwext-doxygen-publish'
    branch: ^(REL.*|master)$

  - name: 'mediawiki-selenium-bundle-yard-publish'
    branch: ^master$
  - name: 'mediawiki-ruby-api-bundle-yard-publish'
    branch: ^master$

  - name: mediawiki-core-jsduck-docker
    branch: ^(REL.*|master)$
  - name: mediawiki-core-jsduck-docker-publish
    # Like the doxygen job, we dont want to run it concurrently.
    mutex: mediawiki-core-jsduck-docker-publish
    # This excludes wmf-branches (instead of including master/REL-branches) so that
    # it may run on for tags in the 'publish' pipeline (T232055)
    skip-if:
      - branch: ^wmf/.*$

  # Job to ease reviews of MW-CS changes
  - name: mw-tools-codesniffer-mwcore-testrun
    voting: false
    success-message: 'SUCCESS Example result against MediaWiki core'
    failure-message: 'FAILURE Example result against MediaWiki core'

  - name: fail-archived-repositories
    queue-name: archived-repos
    failure-message: 'This repository has been archived and new patches are not being accepted. If you want to maintain it follow https://www.mediawiki.org/wiki/Gerrit/Privilege_policy#Requesting_Gerrit_privileges and then change which jobs get run.'

project-templates:

  # For extensions that have broken tests or magic behaviors that CI does not support.
  # See also https://phabricator.wikimedia.org/T183512
  #
  # Only basic PHP7 linting is added.
  #
  - name: extension-broken
    test:
     - mwgate-composer-php72-docker
     - mwgate-node10-docker
    gate-and-submit:
     - mwgate-composer-php72-docker
     - mwgate-node10-docker

    test-1_31:
     - mwgate-composer-php72-docker
     - mwgate-node10-docker
    gate-and-submit-1_31:
     - mwgate-composer-php72-docker
     - mwgate-node10-docker

    test-1_33:
     - mwgate-composer-php72-docker
     - mwgate-node10-docker
    gate-and-submit-1_33:
     - mwgate-composer-php72-docker
     - mwgate-node10-docker

    test-1_34:
     - mwgate-composer-php72-docker
     - mwgate-node10-docker
    gate-and-submit-1_34:
     - mwgate-composer-php72-docker
     - mwgate-node10-docker

    gate-and-submit-l10n:
     - mediawiki-i18n-check-docker
    experimental:
     - mwext-php72-phan-docker
     - mwext-php72-phan-seccheck-docker
     - quibble-composer-mysql-php72-docker
     - quibble-composer-mysql-php73-docker
     - quibble-composer-mysql-php74-docker
    # Surely they are never going to be elected for wmf/ branching or SWAT

  - name: extension-seccheck
    test:
     - mwext-php72-phan-seccheck-docker
    gate-and-submit:
     - mwext-php72-phan-seccheck-docker
    test-wmf:
     - mwext-php72-phan-seccheck-docker
    gate-and-submit-wmf:
     - mwext-php72-phan-seccheck-docker

    # Skip Phan on release branches for now.
    # See T231966 / T226945
    #test-1_31:
    # - mwext-php72-phan-seccheck-docker
    #gate-and-submit-1_31:
    # - mwext-php72-phan-seccheck-docker
    #test-1_33:
    # - mwext-php72-phan-seccheck-docker
    #gate-and-submit-1_33:
    # - mwext-php72-phan-seccheck-docker
    #test-1_34:
    # - mwext-php72-phan-seccheck-docker
    #gate-and-submit-1_34:
    # - mwext-php72-phan-seccheck-docker

  # Runs quibble, and includes experimental jobs
  # that are for extensions.
  - name: extension-quibble
    php:
      - quibble-vendor-mysql-php73-docker
    test:
      - quibble-vendor-mysql-php72-docker
      - mwgate-node10-docker
    gate-and-submit:
      - quibble-vendor-mysql-php72-docker
      - quibble-vendor-mysql-php73-docker
      - mwgate-node10-docker

    test-1_31:
      - mwgate-node10-docker
      - quibble-composer-mysql-php72-docker
    gate-and-submit-1_31:
      - mwgate-node10-docker
      - quibble-composer-mysql-php70-docker
      - quibble-composer-mysql-php71-docker
      - quibble-composer-mysql-php72-docker
      - quibble-composer-mysql-php73-docker

    test-1_33:
      - mwgate-node10-docker
      - quibble-composer-mysql-php72-docker
    gate-and-submit-1_33:
      - mwgate-node10-docker
      - quibble-composer-mysql-php70-docker
      - quibble-composer-mysql-php71-docker
      - quibble-composer-mysql-php72-docker
      - quibble-composer-mysql-php73-docker

    test-1_34:
      - mwgate-node10-docker
      - quibble-composer-mysql-php72-docker
    gate-and-submit-1_34:
      - mwgate-node10-docker
      - quibble-composer-mysql-php72-docker
      - quibble-composer-mysql-php73-docker

    test-wmf:
      - quibble-vendor-mysql-php72-docker
      - mwgate-node10-docker
    gate-and-submit-wmf:
      - quibble-vendor-mysql-php72-docker
      - mwgate-node10-docker

    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker

    experimental:
      - quibble-vendor-sqlite-php72-docker
      - quibble-vendor-mysql-php74-docker
      - mwext-php72-phan-docker
      - mwext-php72-phan-seccheck-docker

  - name: extension-quibble-composer
    php:
      - quibble-composer-mysql-php73-docker
    test:
      - quibble-composer-mysql-php72-docker
      - mwgate-node10-docker
    gate-and-submit:
      - quibble-composer-mysql-php72-docker
      - quibble-composer-mysql-php73-docker
      - mwgate-node10-docker

    test-1_31:
      - mwgate-node10-docker
      - quibble-composer-mysql-php72-docker
    gate-and-submit-1_31:
      - mwgate-node10-docker
      - quibble-composer-mysql-php70-docker
      - quibble-composer-mysql-php71-docker
      - quibble-composer-mysql-php72-docker
      - quibble-composer-mysql-php73-docker

    test-1_33:
      - mwgate-node10-docker
      - quibble-composer-mysql-php72-docker
    gate-and-submit-1_33:
      - mwgate-node10-docker
      - quibble-composer-mysql-php70-docker
      - quibble-composer-mysql-php71-docker
      - quibble-composer-mysql-php72-docker
      - quibble-composer-mysql-php73-docker

    test-1_34:
      - mwgate-node10-docker
      - quibble-composer-mysql-php72-docker
    gate-and-submit-1_34:
      - mwgate-node10-docker
      - quibble-composer-mysql-php72-docker
      - quibble-composer-mysql-php73-docker

    test-wmf:
      - quibble-composer-mysql-php72-docker
      - mwgate-node10-docker
    gate-and-submit-wmf:
      - quibble-composer-mysql-php72-docker
      - mwgate-node10-docker

    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker

    experimental:
      - quibble-composer-sqlite-php72-docker
      - quibble-composer-mysql-php74-docker
      - mwext-php72-phan-docker
      - mwext-php72-phan-seccheck-docker

  # Runs quibble but skip selenium tests - T196960
  - name: extension-quibble-noselenium
    php:
      - quibble-vendor-mysql-php73-noselenium-docker
    test:
      - quibble-vendor-mysql-php72-noselenium-docker
      - mwgate-node10-docker
    gate-and-submit:
      - quibble-vendor-mysql-php72-noselenium-docker
      - quibble-vendor-mysql-php73-noselenium-docker
      - mwgate-node10-docker

    test-1_31:
      - quibble-composer-mysql-php72-noselenium-docker
      - mwgate-node10-docker
    gate-and-submit-1_31:
      - quibble-composer-mysql-php70-noselenium-docker
      - quibble-composer-mysql-php71-noselenium-docker
      - quibble-composer-mysql-php72-noselenium-docker
      - quibble-composer-mysql-php73-noselenium-docker
      - mwgate-node10-docker

    test-1_33:
      - quibble-composer-mysql-php72-noselenium-docker
      - mwgate-node10-docker
    gate-and-submit-1_33:
      - quibble-composer-mysql-php70-noselenium-docker
      - quibble-composer-mysql-php71-noselenium-docker
      - quibble-composer-mysql-php72-noselenium-docker
      - quibble-composer-mysql-php73-noselenium-docker
      - mwgate-node10-docker

    test-1_34:
      - quibble-composer-mysql-php72-noselenium-docker
      - mwgate-node10-docker
    gate-and-submit-1_34:
      - quibble-composer-mysql-php72-noselenium-docker
      - quibble-composer-mysql-php73-noselenium-docker
      - mwgate-node10-docker

    test-wmf:
      - quibble-vendor-mysql-php72-noselenium-docker
      - mwgate-node10-docker
    gate-and-submit-wmf:
      - quibble-vendor-mysql-php72-noselenium-docker
      - mwgate-node10-docker

    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker

    experimental:
      - quibble-vendor-sqlite-php72-noselenium-docker
      - quibble-vendor-mysql-php74-noselenium-docker
      - mwext-php72-phan-docker
      - mwext-php72-phan-seccheck-docker

  # Just for Selenium T232759
  # Should be combined with 'extension-quibble-noselenium' to split Selenium
  # tests to standalone jobs.
  - name: extension-quibble-only-selenium
    test:
      - quibble-vendor-selenium-docker
    gate-and-submit:
      - quibble-vendor-selenium-docker

    test-1_31:
      - quibble-composer-selenium-docker
    gate-and-submit-1_31:
      - quibble-composer-selenium-docker

    test-1_33:
      - quibble-composer-selenium-docker
    gate-and-submit-1_33:
      - quibble-composer-selenium-docker

    test-1_34:
      - quibble-composer-selenium-docker
    gate-and-submit-1_34:
      - quibble-composer-selenium-docker

    test-wmf:
      - quibble-vendor-selenium-docker
    gate-and-submit-wmf:
      - quibble-vendor-selenium-docker

  - name: extension-quibble-composer-noselenium
    php:
      - quibble-composer-mysql-php73-noselenium-docker
    test:
      - quibble-composer-mysql-php72-noselenium-docker
      - mwgate-node10-docker
    gate-and-submit:
      - quibble-composer-mysql-php72-noselenium-docker
      - quibble-composer-mysql-php73-noselenium-docker
      - mwgate-node10-docker

    test-1_31:
      - quibble-composer-mysql-php72-noselenium-docker
      - mwgate-node10-docker
    gate-and-submit-1_31:
      - quibble-composer-mysql-php70-noselenium-docker
      - quibble-composer-mysql-php71-noselenium-docker
      - quibble-composer-mysql-php72-noselenium-docker
      - quibble-composer-mysql-php73-noselenium-docker
      - mwgate-node10-docker

    test-1_33:
      - quibble-composer-mysql-php72-noselenium-docker
      - mwgate-node10-docker
    gate-and-submit-1_33:
      - quibble-composer-mysql-php70-noselenium-docker
      - quibble-composer-mysql-php71-noselenium-docker
      - quibble-composer-mysql-php72-noselenium-docker
      - quibble-composer-mysql-php73-noselenium-docker
      - mwgate-node10-docker

    test-1_34:
      - quibble-composer-mysql-php72-noselenium-docker
      - mwgate-node10-docker
    gate-and-submit-1_34:
      - quibble-composer-mysql-php72-noselenium-docker
      - quibble-composer-mysql-php73-noselenium-docker
      - mwgate-node10-docker

    test-wmf:
      - quibble-composer-mysql-php72-noselenium-docker
      - mwgate-node10-docker
    gate-and-submit-wmf:
      - quibble-composer-mysql-php72-noselenium-docker
      - mwgate-node10-docker

    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker

    experimental:
      - quibble-composer-sqlite-php72-noselenium-docker
      - quibble-composer-mysql-php74-noselenium-docker
      - mwext-php72-phan-docker
      - mwext-php72-phan-seccheck-docker

  # Template to run per-patch selenium browser test using mediawiki_selenium ruby gems.
  #
  # Intentionally not in gate because it's super slow
  #
  # XXX This job is legacy, repositories must be migrated to the wdio runner
  # which is triggered by the Quibble jobs.
  #
  - name: mwselenium-legacy
    test:
      - mwselenium-quibble-docker
    postmerge:
      - mwselenium-quibble-docker

  # Extensions tested together and intented for deployment to the Wikimedia Cluster
  - name: extension-gate
    test:
      # For master
      - wmf-quibble-core-vendor-mysql-php72-docker
      - wmf-quibble-vendor-mysql-php72-docker
      - wmf-quibble-selenium-php72-docker
      - mwgate-node10-docker
    gate-and-submit:
      - mwgate-node10-docker
      # Only triggered on master
      - wmf-quibble-vendor-mysql-php72-docker
      - wmf-quibble-core-vendor-mysql-php72-docker
      - wmf-quibble-selenium-php72-docker
    test-wmf:
      # For wmf branches
      - mwgate-node10-docker
      - wmf-quibble-vendor-mysql-php72-docker
      - wmf-quibble-core-vendor-mysql-php72-docker
      - wmf-quibble-selenium-php72-docker
    gate-and-submit-wmf:
      - mwgate-node10-docker
      # Only triggered on wmf/ branches
      - wmf-quibble-vendor-mysql-php72-docker
      - wmf-quibble-core-vendor-mysql-php72-docker
      - wmf-quibble-selenium-php72-docker

    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker

    experimental:
      - mwext-php72-phan-docker
      - mwext-php72-phan-seccheck-docker

  - name: extension-phan
    test:
     - mwext-php72-phan-docker
    gate-and-submit:
     - mwext-php72-phan-docker

    # Our phan job is broken on release branches for at least a couple reasons:
    # - it uses php72 but some repositories have dependencies that are not
    #   compatible/require php70
    # - the job uses quibble --packages-source=vendor but vendor.git lacks
    #   dependencies. So we should use composer update --no-dev instead.
    #
    # So stop running Phan entirely until we figure it out.
    # See T231966 / T226945
    #test-1_31:
    # - mwext-php72-phan-docker
    #gate-and-submit-1_31:
    # - mwext-php72-phan-docker
    #test-1_33:
    # - mwext-php72-phan-docker
    #gate-and-submit-1_33:
    # - mwext-php72-phan-docker
    #test-1_34:
    # - mwext-php72-phan-docker
    #gate-and-submit-1_34:
    # - mwext-php72-phan-docker

    # It is fine on wmf branches since vendor.git has all the dependencies
    test-wmf:
     - mwext-php72-phan-docker
    gate-and-submit-wmf:
     - mwext-php72-phan-docker

  - name: skin-phan
    test:
     - mwskin-php72-phan-docker
    gate-and-submit:
     - mwskin-php72-phan-docker

    # Skip Phan on release branches for now.
    # See T231966 / T226945
    #test-1_31:
    # - mwskin-php72-phan-docker
    #gate-and-submit-1_31:
    # - mwskin-php72-phan-docker
    #test-1_33:
    # - mwskin-php72-phan-docker
    #gate-and-submit-1_33:
    # - mwskin-php72-phan-docker
    #test-1_34:
    # - mwskin-php72-phan-docker
    #gate-and-submit-1_34:
    # - mwskin-php72-phan-docker

    test-wmf:
     - mwskin-php72-phan-docker
    gate-and-submit-wmf:
     - mwskin-php72-phan-docker

  - name: skin-seccheck
    test:
     - mwskin-php72-phan-seccheck-docker
    gate-and-submit:
     - mwskin-php72-phan-seccheck-docker

    # Skip Phan on release branches for now.
    # See T231966 / T226945
    #test-1_31:
    # - mwskin-php72-phan-seccheck-docker
    #gate-and-submit-1_31:
    # - mwskin-php72-phan-seccheck-docker
    #test-1_33:
    # - mwskin-php72-phan-seccheck-docker
    #gate-and-submit-1_33:
    # - mwskin-php72-phan-seccheck-docker
    #test-1_34:
    # - mwskin-php72-phan-seccheck-docker
    #gate-and-submit-1_34:
    # - mwskin-php72-phan-seccheck-docker

    test-wmf:
     - mwskin-php72-phan-seccheck-docker
    gate-and-submit-wmf:
     - mwskin-php72-phan-seccheck-docker

  - name: extension-coverage
    postmerge:
      - mwext-phpunit-coverage-docker-publish
    coverage:
      - mwext-phpunit-coverage-patch-docker

  - name: extension-codehealth
    postmerge:
      - mwext-codehealth-master-non-voting
    codehealth:
      - mwext-codehealth-patch

  - name: java-codehealth
    codehealth:
      - java-codehealth-patch

  # Runs quibble, and includes experimental jobs
  # that are for skins.
  - name: skin-quibble
    php:
      - quibble-vendor-mysql-php73-docker
      - quibble-vendor-mysql-php74-docker
    test:
      - quibble-vendor-mysql-php72-docker
      - mwgate-node10-docker
    gate-and-submit:
      - quibble-vendor-mysql-php72-docker
      - quibble-vendor-mysql-php73-docker
      # LightNCandy isn't PHP74-compatibile yet T242980
      # - quibble-vendor-mysql-php74-docker
      - mwgate-node10-docker

    # We use composer on release branches
    test-1_31:
      - mwgate-node10-docker
      - quibble-composer-mysql-php72-docker
    gate-and-submit-1_31:
      - mwgate-node10-docker
      - quibble-composer-mysql-php70-docker
      - quibble-composer-mysql-php71-docker
      - quibble-composer-mysql-php72-docker
      - quibble-composer-mysql-php73-docker

    test-1_33:
      - mwgate-node10-docker
      - quibble-composer-mysql-php72-docker
    gate-and-submit-1_33:
      - mwgate-node10-docker
      - quibble-composer-mysql-php70-docker
      - quibble-composer-mysql-php71-docker
      - quibble-composer-mysql-php72-docker
      - quibble-composer-mysql-php73-docker

    test-1_34:
      - mwgate-node10-docker
      - quibble-composer-mysql-php72-docker
    gate-and-submit-1_34:
      - mwgate-node10-docker
      - quibble-composer-mysql-php72-docker
      - quibble-composer-mysql-php73-docker

    test-wmf:
      - quibble-vendor-mysql-php72-docker
      - mwgate-node10-docker
    gate-and-submit-wmf:
      - quibble-vendor-mysql-php72-docker
      - mwgate-node10-docker

    gate-and-submit-l10n:
     - mediawiki-i18n-check-docker

    experimental:
      - quibble-vendor-sqlite-php72-docker
      - mwskin-php72-phan-docker
      - mwskin-php72-phan-seccheck-docker

  - name: skin-quibble-composer
    php:
      - quibble-composer-mysql-php73-docker
    test:
      - quibble-composer-mysql-php72-docker
      - mwgate-node10-docker
    gate-and-submit:
      - quibble-composer-mysql-php72-docker
      - quibble-composer-mysql-php73-docker
      - mwgate-node10-docker

    test-1_31:
      - mwgate-node10-docker
      - quibble-composer-mysql-php72-docker
    gate-and-submit-1_31:
      - mwgate-node10-docker
      - quibble-composer-mysql-php70-docker
      - quibble-composer-mysql-php71-docker
      - quibble-composer-mysql-php72-docker
      - quibble-composer-mysql-php73-docker

    test-1_33:
      - mwgate-node10-docker
      - quibble-composer-mysql-php72-docker
    gate-and-submit-1_33:
      - mwgate-node10-docker
      - quibble-composer-mysql-php70-docker
      - quibble-composer-mysql-php71-docker
      - quibble-composer-mysql-php72-docker
      - quibble-composer-mysql-php73-docker

    test-1_34:
      - mwgate-node10-docker
      - quibble-composer-mysql-php72-docker
    gate-and-submit-1_34:
      - mwgate-node10-docker
      - quibble-composer-mysql-php72-docker
      - quibble-composer-mysql-php73-docker

    test-wmf:
      - quibble-composer-mysql-php72-docker
      - mwgate-node10-docker
    gate-and-submit-wmf:
      - quibble-composer-mysql-php72-docker
      - mwgate-node10-docker

    gate-and-submit-l10n:
     - mediawiki-i18n-check-docker

    experimental:
      - quibble-composer-sqlite-php72-docker
      - quibble-composer-mysql-php72-docker
      - quibble-composer-mysql-php74-docker
      - mwskin-php72-phan-docker
      - mwskin-php72-phan-seccheck-docker

  - name: extension-javascript-documentation
    test:
      - mwext-node10-rundoc-docker
    gate-and-submit:
      - mwext-node10-rundoc-docker
    postmerge:
      - mwext-node10-docs-docker-publish

  - name: composer-test
    test:
      - composer-php72-docker
    gate-and-submit:
      - composer-php70-docker
      - composer-php72-docker

  - name: composer-test-php72-or-later
    test:
      - composer-php72-docker
    gate-and-submit:
      - composer-php72-docker

  - name: composer-test-package
    test:
      - composer-package-php70-docker
      - composer-package-php71-docker
      - composer-package-php72-docker
      - composer-package-php73-docker
    gate-and-submit:
      - composer-package-php70-docker
      - composer-package-php71-docker
      - composer-package-php72-docker
      - composer-package-php73-docker
    experimental:
      - composer-package-php74-docker

  - name: composer-test-package-php72-or-later
    test:
      - composer-package-php72-docker
      - composer-package-php73-docker
    gate-and-submit:
      - composer-package-php72-docker
      - composer-package-php73-docker
    experimental:
      - composer-package-php74-docker

  - name: php-compile-php70-or-later
    test:
     - php-compile-php70-docker
     - php-compile-php71-docker
     - php-compile-php72-docker
     - php-compile-php73-docker
     - php-compile-php74-docker
    gate-and-submit:
     - php-compile-php70-docker
     - php-compile-php71-docker
     - php-compile-php72-docker
     - php-compile-php73-docker
     - php-compile-php74-docker
    postmerge:
     - php74-compile-coverage-publish

  - name: php-compile-php71-or-later
    test:
     - php-compile-php71-docker
     - php-compile-php72-docker
     - php-compile-php73-docker
     - php-compile-php74-docker
    gate-and-submit:
     - php-compile-php71-docker
     - php-compile-php72-docker
     - php-compile-php73-docker
     - php-compile-php74-docker
    postmerge:
     - php74-compile-coverage-publish

  - name: php-compile-php72-or-later
    test:
     - php-compile-php72-docker
     - php-compile-php73-docker
     - php-compile-php74-docker
    gate-and-submit:
     - php-compile-php72-docker
     - php-compile-php73-docker
     - php-compile-php74-docker
    postmerge:
     - php74-compile-coverage-publish

  - name: npm-docker
    test:
      - npm-node-6-docker
    gate-and-submit:
      - npm-node-6-docker
    experimental:
      - generic-node10-docker

  - name: node10-docker
    test:
      - generic-node10-docker
    gate-and-submit:
      - generic-node10-docker

  - name: node10-browser-docker
    test:
      - generic-node10-browser-docker
    gate-and-submit:
      - generic-node10-browser-docker

  - name: service-pipeline-test
    test:
      - trigger-service-pipeline-test
    gate-and-submit:
      - trigger-service-pipeline-test

  - name: service-pipeline-test-and-publish
    postmerge:
      - trigger-service-pipeline-test-and-publish
    publish:
      - trigger-service-pipeline-test-and-publish

  - name: mwgate-npm
    test:
      - mwgate-node10-docker
    gate-and-submit:
      - mwgate-node10-docker
    test-1_31:
      - mwgate-node10-docker
    gate-and-submit-1_31:
      - mwgate-node10-docker
    test-1_33:
      - mwgate-node10-docker
    gate-and-submit-1_33:
      - mwgate-node10-docker
    test-1_34:
      - mwgate-node10-docker
    gate-and-submit-1_34:
      - mwgate-node10-docker

  - name: mwgate-rake
    test:
      - mwgate-rake-docker
    gate-and-submit:
      - mwgate-rake-docker
    test-1_31:
      - mwgate-rake-docker
    gate-and-submit-1_31:
      - mwgate-rake-docker
    test-1_33:
      - mwgate-rake-docker
    gate-and-submit-1_33:
      - mwgate-rake-docker
    test-1_34:
      - mwgate-rake-docker
    gate-and-submit-1_34:
      - mwgate-rake-docker

  - name: puppet-module
    test:
      - puppet-{name}-rake-docker
    gate-and-submit:
      - puppet-{name}-rake-docker

  - name: tox-docker
    test:
     - tox-docker
    gate-and-submit:
     - tox-docker

  - name: mwgate-tox-docker
    test:
     - mwgate-tox-docker
    gate-and-submit:
     - mwgate-tox-docker
    test-1_31:
      - mwgate-tox-docker
    gate-and-submit-1_31:
      - mwgate-tox-docker
    test-1_33:
      - mwgate-tox-docker
    gate-and-submit-1_33:
      - mwgate-tox-docker
    test-1_34:
      - mwgate-tox-docker
    gate-and-submit-1_34:
      - mwgate-tox-docker

  - name: commit-message-validator
    test:
     - commit-message-validator
    # non-voting / under test
    #gate-and-submit:
    # - commit-message-validator

  - name: archived
    test:
     - fail-archived-repositories
    gate-and-submit:
     - fail-archived-repositories

# Register the Gerrit project name, apply them pipelines that in turn trigger
# a set of jobs.
projects:

#### Continuous integration and other developer services #######

  - name: blubber
    test:
      - trigger-blubber-pipeline-test
      - debian-glue
    gate-and-submit:
      - trigger-blubber-pipeline-rehearse
      - debian-glue
    postmerge:
      - trigger-blubber-pipeline-publish

  - name: blubber-doc/example/helloworldoid
    test:
      - trigger-helloworldoid-pipeline-test
    gate-and-submit:
      - noop

  - name: integration/config
    test:
      - integration-config-tox-docker
      - integration-config-jjb-diff-docker
      - integration-config-zuul-layout-diff-docker
    gate-and-submit:
      - integration-config-tox-docker
      - integration-config-jjb-diff-docker
      - integration-config-zuul-layout-validate-docker

  - name: integration/audit-resources
    template:
      - name: tox-docker

  - name: integration/composer
    test:
      - integration-composer-check-php72-docker
    gate-and-submit:
      - integration-composer-check-php72-docker

  - name: integration/commit-message-validator
    template:
      - name: tox-docker

  - name: integration/dashboard
    template:
      - name: tox-docker

  - name: integration/docroot
    template:
     - name: node10-docker
    test:
     - composer-php56-docker
    gate-and-submit:
     - composer-php56-docker
    postmerge:
     - integration-docroot-deploy

  - name: integration/jenkinsci/postbuildscript-plugin
    test:
      - jenkins-plugin-postbuildscript-maven-java8-docker
    gate-and-submit:
      - jenkins-plugin-postbuildscript-maven-java8-docker

  - name: integration/jenkins
    template:
      - name: composer-test
      - name: tox-docker

  - name: integration/pipelinelib
    template:
      - name: service-pipeline-test
    experimental:
      - trigger-service-jenkinsfile
    postmerge:
      - integration-pipelinelib-docker-doc-publish

  - name: integration/quibble
    template:
      - name: tox-docker
    postmerge:
      - integration-quibble-tox-publish

  - name: integration/tox-wikimedia
    template:
      - name: tox-docker

  - name: integration/uprightdiff
    test:
      - debian-glue
    gate-and-submit:
      - debian-glue

  - name: integration/utils
    template:
      - name: tox-docker

  - name: integration/zuul
    test:
      - debian-glue-nocheck
    gate-and-submit:
      - debian-glue-nocheck
    experimental:
      # Tests timeout for some reason - T222952
      - debian-glue
      # For the patch-queue branches - T222952
      - integration-zuul-tox-docker

  - name: mediawiki/tools/api-testing
    test:
    - mediawiki-quibble-api-testing-vendor-mysql-php72-docker
    - mediawiki-quibble-api-testing-vendor-sqlite-php72-docker
    gate-and-submit:
    - mediawiki-quibble-api-testing-vendor-mysql-php72-docker
    - mediawiki-quibble-api-testing-vendor-sqlite-php72-docker

  - name: mediawiki/tools/codesniffer
    template:
     - name: composer-test-package-php72-or-later
    test:
     - mw-tools-codesniffer-mwcore-testrun
    postmerge:
      - phpunit-coverage-docker-publish

  - name: mediawiki/tools/cookiecutter-library
    template:
     - name: tox-docker

  - name: mediawiki/tools/minus-x
    template:
     - name: composer-test-package-php72-or-later

  - name: mediawiki/tools/mwdumper
    test:
      - mwdumper-maven-java8-docker
    gate-and-submit:
      - mwdumper-maven-java8-docker

  - name: mediawiki/tools/phpunit-patch-coverage
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - phpunit-coverage-docker-publish

  - name: mediawiki/tools/release
    template:
      - name: composer-test-package-php72-or-later
      - name: tox-docker

  - name: mediawiki/tools/releng
    template:
      - name: tox-docker
    postmerge:
      - mw-tools-releng-tox-publish

  - name: mediawiki/tools/scap
    template:
      - name: service-pipeline-test
    test:
      # XXX probably needs a job per supported distribution like labs/toollabs
      # See also T210780
      - debian-glue-non-voting
    postmerge:
      - scap-beta-deb

  - name: mediawiki/tools/phan
    template:
     - name: composer-test-package-php72-or-later

  - name: mediawiki/tools/phan/PerfCheckPlugin
    template:
     - name: composer-test-package-php72-or-later

  - name: mediawiki/tools/phan/SecurityCheckPlugin
    template:
     - name: composer-test-package-php72-or-later

  - name: mediawiki/vagrant
    test:
      - mediawiki-vagrant-rake-docker
    gate-and-submit:
      - mediawiki-vagrant-rake-docker
    postmerge:
      - mediawiki-vagrant-puppet-doc-publish

  - name: performance/arc-lamp
    template:
     - name: composer-test-package-php72-or-later

  - name: performance/asoranking
    template:
      - name: tox-docker

  - name: performance/bttostatsv
    template:
      - name: node10-docker

  - name: performance/synthetic-monitoring-tests
    template:
      - name: node10-docker

  - name: performance/coal
    template:
      - name: tox-docker

  - name: performance/docroot
    template:
      - name: node10-docker

  - name: performance/fresnel
    test:
      - fresnel-node10-browser-docker
    gate-and-submit:
      - fresnel-node10-browser-docker
    postmerge:
      - generic-node10-browser-coverage-docker-publish

  - name: performance/navtiming
    template:
      - name: tox-docker

  - name: performance/perfromance
    template:
      - name: node10-docker

  - name: releng/local-charts
    experimental:
      - helm-lint

  - name: operations/deployment-charts
    test-prio:
      - helm-lint
    gate-and-submit:
      - helm-lint

  - name: labs/tools/sonarqubebot
    template:
      - name: composer-test-php72-or-later

#### MediaWiki itself ##########################################

  - name: mediawiki/core
    template:
      - name: extension-gate
    test:
      - mediawiki-quibble-composer-mysql-php72-docker
      - mediawiki-quibble-vendor-mysql-php72-docker
      # FIXME use a normal composer job?
      - mediawiki-quibble-composertest-php72-docker
      - mediawiki-quibble-selenium-vendor-docker
      - mediawiki-quibble-apitests-vendor-docker
      - mediawiki-core-jsduck-docker
      - mediawiki-core-php72-phan-docker
    php:
      - mediawiki-quibble-vendor-sqlite-php72-docker
      - mediawiki-quibble-vendor-postgres-php72-docker
      - mediawiki-quibble-vendor-mysql-php72-docker
      - mediawiki-quibble-vendor-mysql-php73-docker
    gate-and-submit:
      - mediawiki-quibble-composer-mysql-php72-docker
      - mediawiki-quibble-vendor-mysql-php72-docker
      - mediawiki-quibble-vendor-mysql-php73-docker
      # FIXME use a normal composer job?
      - mediawiki-quibble-composertest-php72-docker
      - mediawiki-quibble-selenium-vendor-docker
      - mediawiki-quibble-apitests-vendor-docker
      - mediawiki-quibble-vendor-sqlite-php72-docker
      - mediawiki-quibble-vendor-postgres-php72-docker

      - mediawiki-core-jsduck-docker
      - mediawiki-core-php72-phan-docker

    test-1_31:
      - mediawiki-quibble-composer-mysql-php72-docker
      # FIXME use a normal composer job?
      - mediawiki-quibble-composertest-php72-docker
      - mediawiki-quibble-selenium-composer-docker
      - mediawiki-core-jsduck-docker
    gate-and-submit-1_31:
      - mediawiki-quibble-composer-mysql-php70-docker
      - mediawiki-quibble-composer-mysql-php72-docker
      - mediawiki-quibble-composer-mysql-php73-docker
      # FIXME use a normal composer job?
      - mediawiki-quibble-composertest-php72-docker
      - mediawiki-quibble-selenium-composer-docker
      # Sqlite broken on 1.31
      #- mediawiki-quibble-composer-sqlite-php72-docker
      - mediawiki-core-jsduck-docker

    test-1_33:
      - mediawiki-quibble-composer-mysql-php72-docker
      # FIXME use a normal composer job?
      - mediawiki-quibble-composertest-php72-docker
      - mediawiki-quibble-selenium-composer-docker
      - mediawiki-core-jsduck-docker

      - mediawiki-core-php72-phan-docker
    gate-and-submit-1_33:
      - mediawiki-quibble-composer-mysql-php70-docker
      - mediawiki-quibble-composer-mysql-php71-docker
      - mediawiki-quibble-composer-mysql-php72-docker
      - mediawiki-quibble-composer-mysql-php73-docker
      # FIXME use a normal composer job?
      - mediawiki-quibble-composertest-php72-docker
      - mediawiki-quibble-selenium-composer-docker
      - mediawiki-quibble-composer-sqlite-php72-docker
      - mediawiki-quibble-composer-postgres-php72-docker
      - mediawiki-core-jsduck-docker

      - mediawiki-core-php72-phan-docker

    test-1_34:
      - mediawiki-quibble-composer-mysql-php72-docker
      # FIXME use a normal composer job?
      - mediawiki-quibble-composertest-php72-docker
      - mediawiki-quibble-selenium-composer-docker
      - mediawiki-core-jsduck-docker

      - mediawiki-core-php72-phan-docker
    gate-and-submit-1_34:
      - mediawiki-quibble-composer-mysql-php72-docker
      - mediawiki-quibble-composer-mysql-php73-docker
      # FIXME use a normal composer job?
      - mediawiki-quibble-composertest-php72-docker
      - mediawiki-quibble-selenium-composer-docker
      - mediawiki-quibble-composer-sqlite-php72-docker
      - mediawiki-quibble-composer-postgres-php72-docker
      - mediawiki-core-jsduck-docker

      - mediawiki-core-php72-phan-docker

    test-wmf:
      - mediawiki-quibble-composer-mysql-php72-docker
      - mediawiki-quibble-vendor-mysql-php72-docker
      # FIXME use a normal composer job?
      - mediawiki-quibble-composertest-php72-docker
      - mediawiki-quibble-selenium-vendor-docker
      - mediawiki-quibble-apitests-vendor-docker
      - mediawiki-core-jsduck-docker
      - mediawiki-core-php72-phan-docker
    gate-and-submit-wmf:
      - mediawiki-quibble-vendor-mysql-php72-docker

      # FIXME use a normal composer job?
      - mediawiki-quibble-composertest-php72-docker

      - mediawiki-quibble-selenium-vendor-docker
      - mediawiki-quibble-apitests-vendor-docker

      # FIXME jsduck is most probably no more used on wmf branches
      - mediawiki-core-jsduck-docker

      - mediawiki-core-php72-phan-docker

    test-fundraising:
      - mwgate-composer-php70-docker
      - mwgate-node10-docker
      - quibble-donationinterface-REL1_31-php70-docker
    gate-and-submit-fundraising:
      - mwgate-composer-php70-docker
      - mwgate-node10-docker
      - quibble-donationinterface-REL1_31-php70-docker

    coverage:
      - mwcore-phpunit-coverage-patch
    patch-performance:
      - mediawiki-fresnel-patch-docker
    codehealth:
      - mwcore-codehealth-patch
    postmerge:
      - mediawiki-core-jsduck-docker-publish
      - mwcore-codehealth-master-non-voting
      # Temporarily disable publishing for SRE T242775
      # - trigger-mediawiki-pipeline-publish
    publish:
      # When release tags are created
      - mediawiki-core-jsduck-docker-publish
      - mediawiki-core-doxygen-docker-publish
    post:
      - train-deploy-notes
    experimental:
      # Experimental php version
      - mediawiki-quibble-composer-mysql-php74-docker
      - mediawiki-quibble-vendor-mysql-php74-docker
      - mwgate-composer-php72-docker
      - mediawiki-core-php72-phan-seccheck-docker

  - name: mediawiki/debian
    test:
      - debian-glue-non-voting

  - name: mediawiki/vendor
    template:
      - name: extension-gate
    test:
      - mwgate-composer-php72-docker
      - mediawiki-quibble-vendor-mysql-php72-docker
      - mediawiki-quibble-selenium-vendor-docker
      - mediawiki-quibble-apitests-vendor-docker
    gate-and-submit:
      - mwgate-composer-php72-docker
      - mediawiki-quibble-vendor-mysql-php72-docker
      - mediawiki-quibble-selenium-vendor-docker
      - mediawiki-quibble-apitests-vendor-docker

    gate-and-submit-wmf:
      - mwgate-composer-php72-docker
      - mediawiki-quibble-vendor-mysql-php72-docker
      - mediawiki-quibble-selenium-vendor-docker
      - mediawiki-quibble-apitests-vendor-docker

    # CI no more supports mediawiki/vendor on release branches, folks should
    # use composer install instead. T189560

    test-fundraising:
      - mwgate-composer-php70-docker
      - mwgate-node10-docker
    gate-and-submit-fundraising:
      - mwgate-composer-php70-docker
      - mwgate-node10-docker

    experimental:
      - mwgate-composer-php72-docker

  # VERY EXPERIMENTAL WIKIMEDIA PRODUCTION BUILD WITH NO TESTS YET
  - name: wikimedia/production
    test:
      - noop
    gate-and-submit:
      - noop
    postmerge:
      - trigger-wikimedia-production-pipeline-publish

#### MediaWiki skins ###########################################

#### MediaWiki skins used in Wikimedia production ##############

  - name: mediawiki/skins/CologneBlue
    template:
     - name: skin-quibble
     - name: skin-phan
     - name: skin-seccheck

  - name: mediawiki/skins/EUCopyrightCampaignSkin
    template:
     - name: skin-quibble
     - name: skin-phan
     - name: skin-seccheck

  - name: mediawiki/skins/MinervaNeue
    template:
     - name: skin-quibble
     - name: skin-phan
     - name: skin-seccheck
     - name: extension-gate
     - name: extension-javascript-documentation
     - name: mwgate-rake
     - name: mwselenium-legacy
    postmerge:
     - mwext-doxygen-publish

  - name: mediawiki/skins/Modern
    template:
     - name: skin-quibble
     - name: skin-phan
     - name: skin-seccheck

  - name: mediawiki/skins/MonoBook
    template:
     - name: skin-quibble
     - name: skin-phan
     - name: skin-seccheck

  - name: mediawiki/skins/Nostalgia
    template:
     - name: skin-quibble
     - name: skin-phan
     - name: skin-seccheck

  - name: mediawiki/skins/Timeless
    template:
     - name: skin-quibble
     - name: skin-phan
     - name: skin-seccheck

  - name: mediawiki/skins/Vector
    template:
     - name: skin-quibble
     - name: skin-phan
     - name: skin-seccheck
     - name: extension-gate
     - name: extension-javascript-documentation
    experimental:
     - quibble-composer-mysql-php72-docker

#### Other MediaWiki skins #####################################

  - name: mediawiki/skins/Amethyst
    template:
     - name: skin-quibble

  - name: mediawiki/skins/Anisa
    template:
     - name: skin-quibble
     - name: skin-phan
     - name: skin-seccheck

  - name: mediawiki/skins/apex
    template:
     - name: skin-quibble

  - name: mediawiki/skins/Athena
    template:
     - name: skin-quibble

  - name: mediawiki/skins/BlueSky
    template:
     - name: skin-quibble

  - name: mediawiki/skins/BlueSpiceSkin
    template:
     - name: skin-quibble-composer

  - name: mediawiki/skins/BlueSpiceCalumma
    template:
     - name: skin-quibble-composer

  - name: mediawiki/skins/Bouquet
    template:
     - name: skin-quibble

  - name: mediawiki/skins/Daddio
    template:
     - name: skin-quibble

  - name: mediawiki/skins/DeskMessMirrored
    template:
     - name: skin-quibble

  - name: mediawiki/skins/Dusk
    template:
     - name: skin-quibble

  - name: mediawiki/skins/DuskToDawn
    template:
     - name: skin-quibble

  - name: mediawiki/skins/Empty
    template:
     - name: skin-quibble

  - name: mediawiki/skins/erudite
    template:
     - name: skin-quibble

  - name: mediawiki/skins/Example
    template:
     - name: skin-quibble
     - name: skin-phan
     - name: skin-seccheck

  - name: mediawiki/skins/Gamepress
    template:
     - name: skin-quibble

  - name: mediawiki/skins/GreyStuff
    template:
     - name: skin-quibble
     - name: skin-phan

  - name: mediawiki/skins/HasSomeColours
    template:
     - name: skin-quibble

  - name: mediawiki/skins/Mask
    template:
     - name: skin-quibble
     - name: skin-phan

  - name: mediawiki/skins/Material
    template:
     - name: skin-quibble

  - name: mediawiki/skins/mediawiki-strapping
    template:
     - name: skin-quibble

  - name: mediawiki/skins/Metrolook
    template:
     - name: skin-quibble

  - name: mediawiki/skins/Nimbus
    template:
     - name: skin-quibble

  - name: mediawiki/skins/p2wiki
    template:
     - name: skin-quibble

  - name: mediawiki/skins/Poncho
    template:
     - name: skin-quibble

  - name: mediawiki/skins/Refreshed
    template:
     - name: skin-quibble
     - name: skin-phan

  - name: mediawiki/skins/Schulenburg
    template:
     - name: skin-quibble

  - name: mediawiki/skins/Splash
    template:
     - name: skin-quibble
     - name: skin-phan

  - name: mediawiki/skins/Tempo
    template:
     - name: skin-quibble

  - name: mediawiki/skins/Tomas
    template:
     - name: skin-quibble

  - name: mediawiki/skins/Truglass
    template:
     - name: skin-quibble

  - name: mediawiki/skins/webplatform
    template:
     - name: skin-quibble

  - name: mediawiki/skins/WoOgLeShades
    template:
     - name: skin-quibble

  - name: mediawiki/skins/WPtouch
    template:
     - name: skin-quibble

#### Site Reliability Engineering ("Operations") tools #########

  - name: cergen
    test:
      - debian-glue-non-voting
      - cergen-tox-docker
    gate-and-submit:
      - cergen-tox-docker

  - name: operations/calico-cni
    test:
      - debian-glue-non-voting

  - name: operations/cookbooks
    template:
      - name: tox-docker

  # TIP:
  # gerrit ls-projects -p operations/debs/
  # Nice alignement in vim obtained via: !column -t
  # With vim Tabularize plugin: Tab /test:
  - name: operations/debs/adminbot
    template:
      - name: tox-docker
    test:
      - debian-glue-non-voting
  - { name: operations/debs/archiva,                          test: ['debian-glue-non-voting'] }
  - { name: operations/debs/avconv10,                         test: ['debian-glue-non-voting'] }
  - { name: operations/debs/bdsync,                           test: ['debian-glue-non-voting'] }
  - { name: operations/debs/bloomd,                           test: ['debian-glue-non-voting'] }
  - { name: operations/debs/burrow,                           test: ['debian-glue-non-voting'] }
  - { name: operations/debs/carbon-c-relay,                   test: ['debian-glue-non-voting'] }
  - { name: operations/debs/carbonate,                        test: ['debian-glue-non-voting'] }
  - { name: operations/debs/cassandra-tools-wmf,              test: ['debian-glue-non-voting'] }
  - { name: operations/debs/check_ganglia,                    test: ['debian-glue-non-voting'] }
  - { name: operations/debs/cni,                              test: ['debian-glue-non-voting'] }
  - { name: operations/debs/confd,                            test: ['debian-glue-non-voting'] }
  - { name: operations/debs/coredns,                          test: ['debian-glue-non-voting'] }
  - { name: operations/debs/debdeploy,                        test: ['debian-glue-non-voting'] }
  - { name: operations/debs/docker-distribution,              test: ['debian-glue-non-voting'] }
  - name: operations/debs/doxygen
    test:
      - debian-glue
    gate-and-submit:
      - debian-glue
  - { name: operations/debs/druid,                            test: ['debian-glue-non-voting'] }
  - { name: operations/debs/dynomite,                         test: ['debian-glue-non-voting'] }
  - { name: operations/debs/elastalert,                       test: ['debian-glue-non-voting'] }
  - { name: operations/debs/envoyproxy,                       test: ['debian-glue-non-voting'] }
  - { name: operations/debs/etcd,                             test: ['debian-glue-non-voting'] }
  - { name: operations/debs/etherpad-lite,                    test: ['debian-glue-non-voting'] }
  - { name: operations/debs/ffmpeg2theora,                    test: ['debian-glue-non-voting'] }
  - { name: operations/debs/file-read-backwards,              test: ['debian-glue-non-voting'] }
  - { name: operations/debs/flannel,                          test: ['debian-glue-non-voting'] }
  - { name: operations/debs/flask-login,                      test: ['debian-glue-non-voting'] }
  - { name: operations/debs/ganglia,                          test: ['debian-glue-non-voting'] }
  - { name: operations/debs/geckodriver,                      test: ['debian-glue-non-voting'] }
  - { name: operations/debs/git-deploy,                       test: ['debian-glue-non-voting'] }
  - { name: operations/debs/git-fat,                          test: ['debian-glue-non-voting'] }
  - { name: operations/debs/golang-burrow,                    test: ['debian-glue-non-voting'] }
  - { name: operations/debs/golang-github-howeyc-fsnotify,    test: ['debian-glue-non-voting'] }
  - { name: operations/debs/helm,                             test: ['debian-glue-non-voting'] }
  - name: operations/debs/helm-diff
    test:
      - debian-glue
    gate-and-submit:
      - debian-glue
  - name: operations/debs/helmfile
    test:
      - debian-glue
    gate-and-submit:
      - debian-glue
  - { name: operations/debs/helm-secrets,                     test: ['debian-glue-non-voting'] }
  - { name: operations/debs/ircd-ratbox,                      test: ['debian-glue-non-voting'] }
  - { name: operations/debs/ircecho,                          test: ['debian-glue-non-voting'] }
  - name: operations/debs/jenkins-debian-glue
    test:
      - debian-glue
    gate-and-submit:
      - debian-glue
  - { name: operations/debs/jetty-runner,                     test: ['debian-glue-non-voting'] }
  - { name: operations/debs/jmxtrans,                         test: ['debian-glue-non-voting'] }
  - { name: operations/debs/jvm-tools,                        test: ['debian-glue-non-voting'] }
  - { name: operations/debs/kafka,                            test: ['debian-glue-non-voting'] }
  - { name: operations/debs/kafkacat,                         test: ['debian-glue-non-voting'] }
  - { name: operations/debs/kubernetes,                       test: ['debian-glue-non-voting'] }
  - { name: operations/debs/latexml,                          test: ['debian-glue-non-voting'] }
  - { name: operations/debs/libanon,                          test: ['debian-glue-non-voting'] }
  - { name: operations/debs/libav,                            test: ['debian-glue-non-voting'] }
  - { name: operations/debs/librsvg,                          test: ['debian-glue-non-voting'] }
  - { name: operations/debs/libvpx,                           test: ['debian-glue-non-voting'] }
  - { name: operations/debs/linux,                            test: ['debian-glue-non-voting'] }
  - { name: operations/debs/linux44,                          test: ['debian-glue-non-voting'] }
  - { name: operations/debs/linux-meta,                       test: ['debian-glue-non-voting'] }
  - { name: operations/debs/logstash-gelf,                    test: ['debian-glue-non-voting'] }
  - { name: operations/debs/logster,                          test: ['debian-glue-non-voting'] }
  - { name: operations/debs/lucene-search-2,                  test: ['debian-glue-non-voting'] }
  - { name: operations/debs/mcrouter,                         test: ['debian-glue-non-voting'] }
  - { name: operations/debs/memkeys,                          test: ['debian-glue-non-voting'] }
  - { name: operations/debs/minikube,                         test: ['debian-glue-non-voting'] }
  - { name: operations/debs/mod_tile,                         test: ['debian-glue-non-voting'] }
  - { name: operations/debs/mtail,                            test: ['debian-glue-non-voting'] }
  - { name: operations/debs/mwbzutils,                        test: ['debian-glue-non-voting'] }
  - { name: operations/debs/mysqlatfacebook,                  test: ['debian-glue-non-voting'] }
  - { name: operations/debs/nfsd-ldap,                        test: ['debian-glue-non-voting'] }
  - name: operations/debs/node-tunnel-agent
    test:
      - debian-glue
    gate-and-submit:
      - debian-glue
  - { name: operations/debs/nodejs,                           test: ['debian-glue-non-voting'] }
  - { name: operations/debs/nutcracker,                       test: ['debian-glue-non-voting'] }
  - { name: operations/debs/openssl,                          test: ['debian-glue-non-voting'] }
  - { name: operations/debs/openssl11,                        test: ['debian-glue-non-voting'] }
  - { name: operations/debs/opus,                             test: ['debian-glue-non-voting'] }
  - { name: operations/debs/osm2pgsql,                        test: ['debian-glue-non-voting'] }
  - { name: operations/debs/osmborder,                        test: ['debian-glue-non-voting'] }
  - { name: operations/debs/osm-mapnik-style,                 test: ['debian-glue-non-voting'] }
  - { name: operations/debs/perf-tools,                       test: ['debian-glue-non-voting'] }
  - { name: operations/debs/phantomjs,                        test: ['debian-glue-non-voting'] }
  - { name: operations/debs/php-excimer,                      test: ['debian-glue-non-voting'] }
  - { name: operations/debs/php-mailparse,                    test: ['debian-glue-non-voting'] }
  - { name: operations/debs/pkg-php/php,                      test: ['debian-glue-non-voting'] }
  - { name: operations/debs/pkg-php/php-defaults,             test: ['debian-glue-non-voting'] }
  - { name: operations/debs/pkg-php/php-redis,                test: ['debian-glue-non-voting'] }

  - { name: operations/debs/phpspy,                            test: ['debian-glue-non-voting'] }
  - { name: operations/debs/poolcounter-prometheus-exporter,   test: ['debian-glue-non-voting'] }
  - { name: operations/debs/presto,                            test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus,                        test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-apache-exporter,        test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-blazegraph-exporter,    test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-burrow-exporter,        test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-elasticsearch-exporter, test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-etherpad-exporter,      test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-icinga-exporter,        test: ['debian-glue-non-voting'] }
  - name: operations/debs/prometheus-ipsec-exporter
    test:
      - debian-glue
    gate-and-submit:
      - debian-glue
  - { name: operations/debs/prometheus-ircd-exporter,          test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-jmx-exporter,           test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-logstash-exporter,      test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-mcrouter-exporter,      test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-memcached-exporter,     test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-nutcracker-exporter,    test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-openldap-exporter,      test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-openstack-exporter,     test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-pdns-exporter,          test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-pdns-rec-exporter,      test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-php-fpm-exporter,       test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-rabbitmq-exporter,      test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-redis-exporter,         test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-rsyslog-exporter,       test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-snmp-exporter,          test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-storage-migrator,       test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-statsd-exporter,        test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-swagger-exporter,       test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-varnishkafka-exporter,  test: ['debian-glue-non-voting'] }
  - { name: operations/debs/prometheus-wdqs-updater-exporter,  test: ['debian-glue-non-voting'] }

  - { name: operations/debs/puppet,                           test: ['debian-glue-non-voting'] }
  - { name: operations/debs/puppetdb,                         test: ['debian-glue-non-voting'] }
  - name: operations/debs/pybal
    template:
      - name: tox-docker
    test:
      - debian-glue-non-voting
  - { name: operations/debs/pykube,                           test: ['debian-glue-non-voting'] }
  - { name: operations/debs/pynetbox,                         test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-aiokafka,                  test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-anycast-healthchecker,     test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-confluent-kafka,           test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-diamond,                   test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-dotted,                    test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-etcd,                      test: ['debian-glue'] }
  - { name: operations/debs/python-flask-login,               test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-gear,                      test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-gevent,                    test: ['debian-glue-non-voting'] }
  - name: operations/debs/python-git-archive-all
    test:
      - debian-glue
    gate-and-submit:
      - debian-glue
  - { name: operations/debs/python-google-api,                test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-jsonable,                  test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-jsonschema,                test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-json-logger,               test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-kafka,                     test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-logstash,                  test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-mmh3,                      test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-mwapi,                     test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-mwparserfromhell,          test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-mwtypes,                   test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-phabricator,               test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-pykafka,                   test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-snakebite,                 test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-sprockets,                 test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-sprockets-clients-statsd,  test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-sprockets-mixins-statsd,   test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-stopit,                    test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-thumbor-wikimedia,         test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-ua-parser,                 test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-uritemplate,               test: ['debian-glue-non-voting'] }
  - { name: operations/debs/python-yamlreader,                test: ['debian-glue-non-voting'] }
  - { name: operations/debs/quickstack,                       test: ['debian-glue-non-voting'] }
  - { name: operations/debs/rsyslog,                          test: ['debian-glue-non-voting'] }
  - { name: operations/debs/rt-authen-externalauth,           test: ['debian-glue-non-voting'] }
  - { name: operations/debs/ruby-dimensions,                  test: ['debian-glue-non-voting'] }
  - { name: operations/debs/ruby-execjs,                      test: ['debian-glue-non-voting'] }
  - { name: operations/debs/ruby-jsduck,                      test: ['debian-glue-non-voting'] }
  - { name: operations/debs/ruby-parallel,                    test: ['debian-glue-non-voting'] }
  - { name: operations/debs/salt,                             test: ['debian-glue-non-voting'] }
  - { name: operations/debs/search-qa,                        test: ['debian-glue-non-voting'] }
  - { name: operations/debs/spark2,                           test: ['debian-glue-non-voting'] }
  - { name: operations/debs/squid,                            test: ['debian-glue-non-voting'] }
  - { name: operations/debs/StatsD,                           test: ['debian-glue-non-voting'] }
  - { name: operations/debs/statsite,                         test: ['debian-glue-non-voting'] }
  - { name: operations/debs/statsd-proxy,                     test: ['debian-glue-non-voting'] }
  - { name: operations/debs/tideways-xhprof,                  test: ['debian-glue-non-voting'] }
  - name: operations/debs/tidy-0.99
    test:
      - debian-glue
    gate-and-submit:
      - debian-glue
  - { name: operations/debs/udp2log-log4j-java,               test: ['debian-glue-non-voting'] }
  - { name: operations/debs/utfnormal,                        test: ['debian-glue-non-voting'] }
  - { name: operations/debs/varnish,                          test: ['debian-glue-non-voting'] }
  - { name: operations/debs/varnish4,                         test: ['debian-glue'] }
  - { name: operations/debs/trafficserver,                    test: ['debian-glue'] }
  - { name: operations/debs/superior-cache-analyzer,          test: ['debian-glue-non-voting'] }
  - { name: operations/software/fifo-log-demux,               test: ['debian-glue'] }
  - { name: operations/debs/vips,                             test: ['debian-glue-non-voting'] }
  - { name: operations/debs/wikibugs,                         test: ['debian-glue-non-voting'] }
  - { name: operations/debs/wikimedia-base,                   test: ['debian-glue-non-voting'] }
  - { name: operations/debs/wikimedia-keyring,                test: ['debian-glue-non-voting'] }
  - { name: operations/debs/wikimedia-ldap-tools,             test: ['debian-glue-non-voting'] }
  - { name: operations/debs/wikimedia-lvs-realserver,         test: ['debian-glue-non-voting'] }
  - { name: operations/debs/wikimedia-search-qa,              test: ['debian-glue-non-voting'] }
  - { name: operations/debs/wikimedia-task-appserver,         test: ['debian-glue-non-voting'] }
  - { name: operations/debs/wmf-pt-kill,                      test: ['debian-glue-non-voting'] }
  - name: operations/debs/wikistats
    test:
      - noop

  # Content translation related packages
  - { name: operations/debs/contenttranslation/apertium,               test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-af-nl,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-apy,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-arg,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-arg-cat,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-bel,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-bel-rus,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-br-fr,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-ca-it,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-cat,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-cat-srd,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-crh,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-crh-tur,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-cy-en,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-dan,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-dan-nor,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-en-ca,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-en-es,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-en-gl,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-eo-ca,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-eo-en,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-eo-es,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-eo-fr,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-es-an,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-es-ast,       test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-es-gl,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-es-pt,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-es-ro,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-eu-en,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-eu-es,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-eus,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-fra,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-fra-cat,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-fr-es,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-hbs,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-hbs-eng,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-hbs-mkd,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-hbs-slv,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-hin,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-id-ms,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-isl,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-isl-eng,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-is-sv,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-ita,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-kaz,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-kaz-tat,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-lex-tools,    test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-mk,           test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-mk-bg,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-mk-en,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-mlt-ara,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-nno,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-nno-nob,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-nob,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-oc-ca,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-oc-es,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-pt-ca,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-pt-gl,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-rus,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-rus-ukr,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-separable,    test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-streamparser, test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-sme-nob,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-spa,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-spa-arg,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-spa-cat,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-spa-ita,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-srd,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-srd-ita,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-sv-da,        test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-swe,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-swe-dan,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-swe-nor,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-tat,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-tur,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-urd,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-ukr,          test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/apertium-urd-hin,      test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/cg3,                   test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/foma,                  test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/giella-core,           test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/giella-sme,            test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/hfst,                  test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/hfst-ospell,           test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/lttoolbox,             test: ['debian-glue'] }
  - { name: operations/debs/contenttranslation/python-toro,           test: ['debian-glue'] }

  - name: operations/dns
    test-prio:
      - operations-dns-lint-docker

  - name: operations/docker-images/toollabs-images
    template:
      - name: tox-docker

  - name: operations/dumps
    template:
      - name: tox-docker

  - name: operations/dumps/dcat
    template:
      - name: composer-test
      - name: node10-docker
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker

  - name: operations/dumps/import-tools
    template:
      - name: tox-docker

  - name: operations/dumps/statusapi
    template:
      - name: tox-docker

  - name: operations/homer/public
    template:
      - name: tox-docker

  - name: operations/mediawiki-config
    test-prio:
      - operations-mw-config-php72-composer-lint-docker
      - operations-mw-config-php72-composer-test-docker
      - operations-mw-config-php72-composer-diffConfig-docker
      - operations-mw-config-typos-docker
    gate-and-submit:
      - operations-mw-config-php72-composer-lint-docker
      - operations-mw-config-php72-composer-test-docker
      # Not allowed whilst non-voting:
      # - operations-mw-config-php72-composer-diffConfig-docker
      - operations-mw-config-typos-docker
    postmerge:
      - beta-mediawiki-config-update-eqiad

  - name: operations/puppet
    test-prio:
      - operations-puppet-tests-stretch-docker
    experimental:
      - operations-puppet-catalog-compiler-test

  - name: operations/puppet-lint/wmf_styleguide-check
    test:
      - puppet-wmf-styleguide-rake-docker
    gate-and-submit:
      - puppet-wmf-styleguide-rake-docker

  # Repo of misc softwares
  # Voting V+2 so ops dont idle waiting for CI to report.
  - name: operations/software
    template:
      - name: tox-docker

  - name: operations/software/acme-chief
    test:
      - debian-glue-non-voting
      - acme-chief-tox-docker
    gate-and-submit:
      - acme-chief-tox-docker
    postmerge:
      - acme-chief-tox-docker

  - name: operations/software/cassandra-table-properties
    test:
     - cassandra-table-properties-tox-docker
     - debian-glue-non-voting
    gate-and-submit:
     - cassandra-table-properties-tox-docker

  - name: operations/software/censorship-monitoring
    template:
      - name: tox-docker

  - name: operations/software/conftool
    test:
      - debian-glue-non-voting
      - conftool-tox-docker
    gate-and-submit:
      # requires etcd to be installed for integration tests
      - conftool-tox-docker

  - name: operations/software/cumin
    test:
      - debian-glue-backports-non-voting
      - cumin-tox-docker
    gate-and-submit:
      - cumin-tox-docker
    postmerge:
      - cumin-tox-publish
    publish:
      - cumin-tox-tag-publish

  - name: operations/software/certcentral
    test:
      - debian-glue-non-voting
      - acme-chief-tox-docker
    gate-and-submit:
      - acme-chief-tox-docker
    postmerge:
      - acme-chief-tox-docker

  - name: operations/software/debmonitor
    template:
      - name: tox-docker
    test:
      - debian-glue-non-voting

  - name: operations/software/external-monitoring
    template:
      - name: tox-docker

  - name: operations/docker-images/docker-pkg
    template:
      - name: tox-docker
    postmerge:
      - docker-pkg-tox-publish

  - name: operations/docker-images/docker-report
    template:
        - name: tox-docker

  - name: operations/software/elasticsearch-tool
    template:
      - name: tox-docker

  - name: operations/software/elasticsearch/plugins
    test:
      - debian-glue-non-voting

  - name: operations/software/etcd-mirror
    template:
      - name: tox-docker
    test:
      - debian-glue-non-voting

  - name: operations/software/gerrit
    test:
      - gerrit-docker
    gate-and-submit:
      - gerrit-docker

  - name: operations/software/homer
    test:
      - homer-tox-docker
    gate-and-submit:
      - homer-tox-docker
    postmerge:
      - homer-tox-publish
    publish:
      - homer-tox-tag-publish

  - name: operations/software/httpbb
    template:
      - name: tox-docker

  - name: operations/software/ircyall
    template:
      - name: tox-docker

  - name: operations/software/keyholder
    template:
      - name: tox-docker

  - name: operations/software/labsdb-auditor
    template:
      - name: tox-docker

  - name: operations/software/netbox-extras
    test:
      - tox-docker

  - name: operations/software/netbox-reports
    test:
      - debian-glue-backports-non-voting
      - netbox-reports-tox-docker
    gate-and-submit:
      - netbox-reports-tox-docker

  - name: operations/software/nginx
    test:
      - debian-glue-non-voting

  - name: operations/software/python-poolcounter
    template:
      - name: tox-docker
    test:
      - debian-glue-non-voting

  - name: operations/software/puppet-compiler
    template:
      - name: tox-docker

  - name: operations/software/service-checker
    template:
      - name: tox-docker
    test:
      - debian-glue-non-voting

  - name: operations/software/spicerack
    template:
      - name: tox-docker
    test:
      - debian-glue-backports-non-voting
    postmerge:
      - spicerack-tox-publish
    publish:
      - spicerack-tox-tag-publish

  - name: operations/software/tools-manifest
    template:
      - name: tox-docker
    test:
      - debian-glue
    gate-and-submit:
      - debian-glue

  - name: operations/software/tools-webservice
    template:
      - name: tox-docker
    test:
      - debian-glue
    gate-and-submit:
      - debian-glue

  - name: operations/software/hhvm_exporter
    template:
      - name: tox-docker

  - name: operations/software/wmfmariadbpy
    template:
      - name: tox-docker

  # Varnish related - T180329
  - name: operations/software/varnish/libvmod-header
    test: [ 'debian-glue-non-voting' ]
  - name: operations/software/varnish/libvmod-netmapper
    test: [ 'debian-glue' ]
  - name: operations/software/varnish/libvmod-tbf
    test: [ 'debian-glue-non-voting' ]
  - name: operations/software/varnish/libvmod-uuid
    test: [ 'debian-glue-non-voting' ]
  - name: operations/software/varnish/libvmod-vslp
    test: [ 'debian-glue-non-voting' ]
  - name: operations/software/varnish/libvmod-re2
    test: [ 'debian-glue' ]

  - name: operations/software/varnish/varnishkafka
    test: [ 'debian-glue' ]
  - name: operations/software/varnish/varnishkafka/testing
    test: [ 'debian-glue-non-voting' ]

  - name: operations/software/varnish/vhtcpd
    test: [ 'debian-glue' ]
  # End Varnish related

  - name: operations/switchdc
    template:
      - name: tox-docker

#### MediaWiki extensions ######################################

#### MediaWiki extensions used in Wikimedia production #########

  - name: mediawiki/extensions/3D
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/AbuseFilter
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-gate

  - name: mediawiki/extensions/ActiveAbstract
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/AdvancedSearch
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-codehealth
      - name: extension-coverage

  - name: mediawiki/extensions/AntiSpoof
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-gate

  - name: mediawiki/extensions/ApiFeatureUsage
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/ArticleCreationWorkflow
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/ArticlePlaceholder
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/Babel
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-gate

  - name: mediawiki/extensions/BetaFeatures
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/BounceHandler
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/Calendar
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Campaigns
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Capiunto
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/CategoryTree
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/CentralAuth
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/CentralNotice
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/CharInsert
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/CheckUser
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-gate

  - name: mediawiki/extensions/CirrusSearch
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-codehealth
      - name: extension-gate
      - name: extension-coverage
    postmerge:
      - mwext-doxygen-publish

  - name: mediawiki/extensions/Cite
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-codehealth
      - name: extension-coverage
      - name: extension-gate

  - name: mediawiki/extensions/CiteThisPage
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate

  - name: mediawiki/extensions/Citoid
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/cldr
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-gate

  - name: mediawiki/extensions/CodeEditor
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate

  - name: mediawiki/extensions/CodeMirror
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/CodeReview
    template:
      - name: extension-quibble
     # FIXME: Missing phan
     # - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/Cognate
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/CollaborationKit
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-javascript-documentation
    postmerge:
      - mwext-doxygen-publish

  - name: mediawiki/extensions/Collection
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/CommonsMetadata
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/ConfirmEdit
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-gate

  - name: mediawiki/extensions/CongressLookup
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/ContactPage
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/ContentTranslation
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-gate

  - name: mediawiki/extensions/ContributionTracking
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/CreditsSource
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Dashiki
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Disambiguator
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/DiscussionTools
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/DismissableSiteNotice
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  # Special handling
  - name: mediawiki/extensions/DonationInterface
    test:
      - mwgate-composer-php70-docker
      - mwgate-node10-docker
      - quibble-donationinterface-REL1_31-php70-docker
    gate-and-submit:
      - mwgate-composer-php70-docker
      - mwgate-node10-docker
      - quibble-donationinterface-REL1_31-php70-docker
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker
    experimental:
     - mwext-php72-phan-docker
     - mwext-php72-phan-seccheck-docker

  - name: mediawiki/extensions/DoubleWiki
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/DynamicSidebar
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Echo
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-codehealth
      - name: extension-gate
      - name: extension-coverage

  - name: mediawiki/extensions/Elastica
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate

  - name: mediawiki/extensions/ElectronPdfService
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/EntitySchema
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-codehealth
      - name: extension-coverage

  - name: mediawiki/extensions/EUCopyrightCampaign
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/EventBus
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/EventStreamConfig
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/EventLogging
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-gate
      - name: extension-javascript-documentation

  - name: mediawiki/extensions/ExtensionDistributor
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/ExternalGuidance
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/FeaturedFeeds
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/FileExporter
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/FileImporter
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-gate

  - name: mediawiki/extensions/FlaggedRevs
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Flow
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-codehealth
      - name: extension-gate
      - name: extension-javascript-documentation
      - name: extension-coverage
      - name: mwgate-rake

  - name: mediawiki/extensions/FundraiserLandingPage
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/FundraisingTranslateWorkflow
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Gadgets
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-gate

  - name: mediawiki/extensions/GeoCrumbs
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/GeoData
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-gate

  - name: mediawiki/extensions/GettingStarted
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/GlobalBlocking
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/GlobalCssJs
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-gate

  - name: mediawiki/extensions/GlobalPreferences
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-gate

  - name: mediawiki/extensions/GlobalUsage
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/GlobalUserPage
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/GoogleNewsSitemap
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Graph
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/GrowthExperiments
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-codehealth
      - name: extension-coverage

  - name: mediawiki/extensions/GuidedTour
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-gate
      - name: extension-javascript-documentation

  - name: mediawiki/extensions/GWToolset
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/ImageMap
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate

  - name: mediawiki/extensions/InputBox
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate

  - name: mediawiki/extensions/Insider
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/intersection
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Interwiki
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate

  - name: mediawiki/extensions/InterwikiSorting
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Jade
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/Josa
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/JsonConfig
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-gate

  - name: mediawiki/extensions/Kartographer
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-javascript-documentation
    postmerge:
      - mwext-doxygen-publish

  - name: mediawiki/extensions/LabeledSectionTransclusion
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/LandingCheck
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/LdapAuthentication
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Linter
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/LiquidThreads
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Listings
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/LocalisationUpdate
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/LoginNotify
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/MachineVision
    template:
      # FIXME: Document why this is using the composer variant.
      - name: extension-quibble-composer
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/MapSources
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/MassMessage
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/Math
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/MobileApp
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate

  - name: mediawiki/extensions/MobileFrontend
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate
      - name: extension-codehealth
      - name: extension-javascript-documentation
      - name: extension-coverage
    postmerge:
      - mwext-doxygen-publish

  - name: mediawiki/extensions/MultimediaViewer
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: mwgate-rake
      - name: mwselenium-legacy
      - name: extension-javascript-documentation

  - name: mediawiki/extensions/NavigationTiming
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate

  - name: mediawiki/extensions/Newsletter
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/NewUserMessage
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Nuke
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/OATHAuth
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/OAuth
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/OpenStackManager
    template:
      # FIXME: Document why this is using the composer variant.
      - name: extension-quibble-noselenium
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/ORES
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-codehealth
      - name: extension-coverage

  - name: mediawiki/extensions/PageAssessments
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/PagedTiffHandler
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/PageImages
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/PageTriage
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-codehealth
      - name: extension-coverage
      - name: mwgate-rake

  - name: mediawiki/extensions/PageViewInfo
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/ParserFunctions
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-gate

  # Not currently in production, but will be brought back for the Parsoid migration
  - name: mediawiki/extensions/ParserMigration
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/ParsoidBatchAPI
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/PdfHandler
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate

  - name: mediawiki/extensions/PerformanceInspector
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Poem
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate

  - name: mediawiki/extensions/PoolCounter
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Popups
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-codehealth
      - name: extension-javascript-documentation
      - name: extension-coverage

  - name: mediawiki/extensions/ProofreadPage
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/PropertySuggester
    template:
      # FIXME: Document why this is using the composer variant.
      - name: extension-quibble-composer
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/QuickSurveys
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: mwgate-rake
      - name: mwselenium-legacy

  - name: mediawiki/extensions/Quiz
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/ReadingLists
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/RelatedArticles
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Renameuser
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  # Not on production, but in the MediaWiki release tarball
  - name: mediawiki/extensions/ReplaceText
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/RevisionSlider
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: mwselenium-legacy

  - name: mediawiki/extensions/RSS
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/SandboxLink
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate

  - name: mediawiki/extensions/Score
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: mwgate-npm

  - name: mediawiki/extensions/Scribunto
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/SearchExtraNS
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/SecureLinkFixer
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/SecurePoll
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Sentry
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/ShortUrl
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/SiteMatrix
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate

  - name: mediawiki/extensions/SkinPerPage
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/SpamBlacklist
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-gate

  # Planned to be used on Beta Cluster.
  - name: mediawiki/extensions/StopForumSpam
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/SubPageList3
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/SubpageSortkey
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/SyntaxHighlight_GeSHi
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/TemplateData
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-gate
      - name: extension-javascript-documentation

  - name: mediawiki/extensions/TemplateSandbox
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/TemplateStyles
    template:
      # FIXME: Document why this is using the composer variant.
      - name: extension-quibble-composer
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/TemplateWizard
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/TextExtracts
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/Thanks
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate

  - name: mediawiki/extensions/TheWikipediaLibrary
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/TimedMediaHandler
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate

  - name: mediawiki/extensions/timeline
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/TitleBlacklist
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/TocTree
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/TorBlock
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Translate
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate
      - name: extension-codehealth
      - name: extension-coverage

  - name: mediawiki/extensions/TranslationNotifications
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/TrustedXFF
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/TwoColConflict
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/UniversalLanguageSelector
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: extension-gate

  - name: mediawiki/extensions/UploadsLink
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/UploadWizard
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage
      - name: mwgate-tox-docker

  - name: mediawiki/extensions/UrlShortener
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/UserMerge
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/VipsScaler
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/VisualEditor
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate
      - name: commit-message-validator
      - name: mwgate-rake
      - name: extension-javascript-documentation

  - name: mediawiki/extensions/WebAuthn
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Wikibase
    template:
      # Split the quibble tests into selenium-only and no-selenium for speed
      - name: extension-quibble-noselenium
      - name: extension-quibble-only-selenium
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate
      - name: extension-codehealth
      - name: extension-javascript-documentation
      - name: extension-coverage
      - name: mwgate-npm
      - name: mwgate-rake
    test:
      - mwselenium-quibble-docker
      - wikibase-client-docker
      - wikibase-repo-docker
    gate-and-submit: &mediawiki-extensions-wikibase-gate-and-submit
      - mwselenium-quibble-docker
      - wikibase-client-docker
      - wikibase-repo-docker
    gate-and-submit-wmf: *mediawiki-extensions-wikibase-gate-and-submit
    postmerge:
      - mwext-doxygen-publish

  - name: mediawiki/extensions/WikibaseCirrusSearch
    template:
      # Split the quibble tests into selenium-only and no-selenium for speed
      - name: extension-quibble-noselenium
      - name: extension-quibble-only-selenium
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate

  - name: mediawiki/extensions/WikibaseLexeme
    template:
      # Split the quibble tests into selenium-only and no-selenium for speed
      - name: extension-quibble-noselenium
      - name: extension-quibble-only-selenium
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-codehealth
      - name: extension-coverage

  - name: mediawiki/extensions/WikibaseLexemeCirrusSearch
    template:
      # Split the quibble tests into selenium-only and no-selenium for speed
      - name: extension-quibble-noselenium
      - name: extension-quibble-only-selenium
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/WikibaseMediaInfo
    template:
      # Split the quibble tests into selenium-only and no-selenium for speed
      - name: extension-quibble-noselenium
      - name: extension-quibble-only-selenium
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate
      - name: extension-codehealth
      - name: extension-coverage

  - name: mediawiki/extensions/WikibaseQualityConstraints
    template:
      # FIXME: Document why this is using the composer variant.
      - name: extension-quibble-composer
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-codehealth

  - name: mediawiki/extensions/Wikidata.org
    template:
      # FIXME: Document why this is using the composer variant.
      - name: extension-quibble-composer
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/WikidataPageBanner
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/WikiEditor
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-gate

  - name: mediawiki/extensions/wikihiero
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/WikiLove
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/WikimediaBadges
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/WikimediaEditorTasks
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/WikimediaEvents
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck
      - name: extension-coverage

  - name: mediawiki/extensions/WikimediaIncubator
    template:
      - name: extension-quibble-noselenium
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/WikimediaMaintenance
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/WikimediaMessages
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Wikisource
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/XAnalytics
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

#### Other MediaWiki extensions ################################

  - name: mediawiki/extensions/AbsenteeLandlord
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/AbuseFilterBypass
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/AccessControl
    template:
      - name: extension-quibble-noselenium

  - name: mediawiki/extensions/AccountInfo
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/AddHTMLMetaAndTitle
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/AddMessages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/AddPersonalUrls
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/AddThis
    template:
      - name: extension-quibble-noselenium

  - name: mediawiki/extensions/AdManager
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/AdminLinks
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/AdvancedMeta
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/AJAXPoll
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/AkismetKlik
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/AllTimeZones
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/AnchorHandler
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/AnonPrivacy
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ApprovedRevs
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Arrays
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ArticleFeedbackv5
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ArticleIndex
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ArticleMetaDescription
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ArticleRatings
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ArticleToCategory2
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Athena
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Auth_remoteuser
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/AuthenticatedKeyValueStore
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/AuthorProtect
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/AutoCategoriseUploads
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/AutoCreateCategoryPages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/AutoGallery
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/AutoProxyBlock
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Awesomeness
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/AzharAuth
    template:
     - name: extension-broken  # T110291 / T198601

  - name: mediawiki/extensions/BaseHooks
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/BatchUserRights
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/BiblioPlus
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/BibManager
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Blackout
    template:
      - name: extension-quibble-noselenium

  - name: mediawiki/extensions/BlockAndNuke
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/BlogPage
    template:
      - name: extension-quibble

###### BlueSpice extensions: Start

  - name: mediawiki/extensions/BlueSpiceAbout
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpicePageAccess
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceArticleInfo
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceArticlePreviewCapture
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceAuthors
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceAvatars
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceBookshelf
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceBookshelfUI
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceCategoryCheck
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceCategoryManager
    template:
      - name: extension-broken

  - name: mediawiki/extensions/BlueSpiceChecklist
    template:
      - name: extension-broken
      - name: mwgate-npm

  - name: mediawiki/extensions/BlueSpiceConfigManager
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceContextMenu
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceCountThings
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceCustomMenu
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceNamespaceCSS
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceDashboards
    template:
      - name: extension-broken

  - name: mediawiki/extensions/BlueSpiceDistributionConnector
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceEchoConnector
    template:
      - name: extension-broken

  - name: mediawiki/extensions/BlueSpiceEditNotifyConnector
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceEmoticons
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceExpiry
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceExportTables
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceExtendedFilelist
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceExtendedSearch
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceExtendedStatistics
    template:
      - name: extension-broken

  # meta repo containing a bunch of extensions. Would need one day a proper job
  # that loads all of them and run test suite.
  - name: mediawiki/extensions/BlueSpiceExtensions
    template:
      - name: extension-broken
      - name: mwgate-npm
    test:
      - mwgate-composer-php72-docker
    gate-and-submit:
      - mwgate-composer-php72-docker

  - name: mediawiki/extensions/BlueSpiceFilterableTables
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceFoundation
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceGroupManager
    template:
      - name: extension-broken

  - name: mediawiki/extensions/BlueSpiceHideTitle
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceInsertCategory
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceInsertFile
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceInsertLink
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceInsertMagic
    template:
      - name: extension-broken

  - name: mediawiki/extensions/BlueSpiceInsertTemplate
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceInterWikiLinks
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceMultiUpload
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceNamespaceManager
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceNSFileRepoConnector
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpicePageAssignments
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpicePageFormsConnector
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpicePageTemplates
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpicePageVersion
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpicePagesVisited
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpicePermissionManager
    template:
      - name: extension-broken

  - name: mediawiki/extensions/BlueSpicePrivacy
    template:
      - name: extension-quibble-composer-noselenium

  - name: mediawiki/extensions/BlueSpiceQrCode
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceRating
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceRSSFeeder
    template:
      - name: extension-broken

  - name: mediawiki/extensions/BlueSpiceReadConfirmation
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceReminder
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceReaders
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceSaferEdit
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceSignHere
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceSmartList
    template:
      - name: extension-broken

  - name: mediawiki/extensions/BlueSpiceSMWConnector
    template:
      - name: extension-broken  # Semantic MediaWiki

  - name: mediawiki/extensions/BlueSpiceSocial
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceSocialArticleActions
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceSocialBlog
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceSocialComments
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceSocialMicroBlog
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceSocialProfile
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceSocialRating
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceSocialResolve
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceSocialTags
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceSocialTimelineUpdate
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceSocialTopics
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceSocialWatch
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceSocialWikiPage
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceSubPageTree
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceTagCloud
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceUEModuleBookPDF
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceUEModuleDOCX
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceUEModulePDF
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceUEModulePDFRecursive
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceUEModulePDFSubpages
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceUEModuleHTML
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceUEModuleTable2Excel
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceUniversalExport
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceUsageTracker
    template:
      - name: extension-broken

  - name: mediawiki/extensions/BlueSpiceUserInfo
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceUserManager
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceUserSidebar
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceVisualDiff
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceVisualEditorConnector
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceWatchList
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceWhoIsOnline
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/BlueSpiceWikiExplorer
    template:
      - name: extension-quibble-composer

###### BlueSpice extensions: End

  - name: mediawiki/extensions/BoilerPlate
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/BreadCrumbs
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/BreadCrumbs2
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/BrickipediaExtra
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Buggy
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Cargo
    template:
      - name: extension-quibble
      - name: extension-coverage

  - name: mediawiki/extensions/Carp
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CategorySortHeaders
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CategoryTagSorter
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CategoryTests
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CategoryWatch
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CentralLogging
    template:
      - name: extension-quibble
      - name: extension-phan

  - name: mediawiki/extensions/Challenge
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ChangeAuthor
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ChangeUserPasswords
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CharRangeSpan
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Checkpoint
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ChessBrowser
    template:
      - name: extension-quibble
      - name: extension-seccheck
      - name: extension-coverage
    postmerge:
      - mwext-doxygen-publish

  - name: mediawiki/extensions/CiteDrawer
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CleanChanges
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/CloneDiff
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CloseWikis
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CollapsibleSections
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CollapsibleVector
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Commentbox
    template:
      - name: extension-quibble-noselenium

  - name: mediawiki/extensions/Comments
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CommentStreams
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CommonMessages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ConfigurableCounters
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ConfirmAccount
    template:
      - name: extension-quibble-noselenium

  - name: mediawiki/extensions/ContributionCredits
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ContributionScores
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ContributionsList
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Contributors
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CookieWarning
    template:
      - name: extension-quibble
      - name: extension-coverage

  - name: mediawiki/extensions/CopyToClipboard
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CountDownClock
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CrawlableAllPages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CreatedPagesList
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CreateAPage
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CreatePage
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CreatePageUw
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CreateRedirect
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CreateUserPage
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/CSS
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/D3Loader
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DarkMode
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DataTable2
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DataTransfer
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DateDiff
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DebateTree
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DebugMode
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DebugTemplates
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DeleteBatch
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DeleteOwn
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DeletePagesForGood
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DeleteUserPages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Description2
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DeviceMapLogCapture
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Diagnosis
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DidYouKnow
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DisableAccount
    template:
      - name: extension-quibble
      - name: extension-seccheck

  - name: mediawiki/extensions/Discourse
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DiscussionThreading
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DisplayTitle
    template:
      - name: extension-quibble
      - name: extension-coverage

  - name: mediawiki/extensions/DisqusTag
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DocBookExport
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DownloadCounter
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DPLforum
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Drafts
    template:
      - name: extension-quibble
      - name: extension-phan

  - name: mediawiki/extensions/DumpHTML
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Duplicator
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DynamicPageList
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/DynamicPageListEngine
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Editcount
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/EditcountAdditions
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/EditNotify
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/EditSimilar
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/EditSubpages
    template:
      - name: extension-quibble-noselenium

  - name: mediawiki/extensions/EditUser
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/EmailAuth
    template:
      - name: extension-quibble
      - name: extension-coverage

  - name: mediawiki/extensions/EmailAuthorization
    template:
      - name: extension-quibble-noselenium

  - name: mediawiki/extensions/EmailCapture
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/EmailDiff
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/EnhanceContactForm
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ErrorHandler
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/EtherpadLite
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/examples
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ExternalArticles
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ExternalData
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ExtJSBase
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ExtraLanguageLink
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ExtTab
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/FanBoxes
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Farmer
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Favorites
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Figures
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/FileAnnotations
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/FileSystemImageServer
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/FilterListUsers
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/FilterSpecialPages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/FixedHeaderTable
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/FlickrAPI
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/FlvHandler
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ForcePreview
    template:
      - name: extension-quibble-noselenium

  - name: mediawiki/extensions/Form
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/FormatDates
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/FormelApplet
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/FormPreloadPostCache
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/FormWizard
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/FundraisingEmailUnsubscribe
    template:
      - name: extension-quibble-composer
      - name: extension-seccheck

  - name: mediawiki/extensions/GenerateMochaConfig
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Genealogy
    template:
      - name: extension-quibble
      - name: extension-coverage
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/GeoGebra
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Git2Pages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GitGadgets
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Gitweb
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GlobalCheckUser
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GlobalContribs
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GlobalContributions
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GlobalNotice
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GlobalUserGroups
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GlobalUserrights
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GoogleAdSense
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/googleAnalytics
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GoogleAnalyticsMetrics
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GoogleAnalyticsTopPages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GoogleAppEngine
    template:
      - name: extension-quibble-composer-noselenium

  - name: mediawiki/extensions/GoogleAuthenticator
    template:
      - name: extension-quibble-noselenium

  - name: mediawiki/extensions/GoogleCustomWikiSearch
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GoogleDocs4MW
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GoogleDocTag
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GoogleGeocode
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GoogleLogin
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GooglePlaces
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GoogleSiteSearch
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GoToShell
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GPGMail
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/GraphQL
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/GraphViz
    template:
      - name: extension-quibble
      - name: extension-coverage

  - name: mediawiki/extensions/GroupsSidebar
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/HashTables
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/HAWelcome
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/HeaderTabs
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/HelpCommons
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/HelpPages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/HidePrefix
    template:
      - name: extension-quibble

  # Depends on SemanticForms and Semantic MediaWiki which are on GitHub
  - name: mediawiki/extensions/HierarchyBuilder
    template:
     - name: extension-broken

  - name: mediawiki/extensions/HighlightjsIntegration
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/HitCounters
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/HostStats
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/HoverGallery
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Hreflang
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/HSTS
    template:
      - name: extension-quibble

  # Require $wgNamespacesWithSubpages set to TRUE in the MAIN namespace.
  - name: mediawiki/extensions/Html2Wiki
    template:
     - name: extension-broken

  - name: mediawiki/extensions/HTMLets
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/HTMLTags
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/I18nTags
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Ids
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/IframePage
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/IfTemplates
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ImageCompare
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ImageRating
    template:
      - name: extension-quibble
      - name: extension-phan

  - name: mediawiki/extensions/ImageTweaks
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ImapAuthorization
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ImportArticles
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ImportFreeImages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ImportUsers
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/IndexFunction
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/InlineCategorizer
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/InteractiveBlockMessage
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Interlanguage
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/InterwikiExtracts
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/InviteSignup
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/JSBreadCrumbs
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/JsonData
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/LanguageSelector
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/LanguageTag
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/LanguageTool
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/LastModified
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/LastUserLogin
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/LDAPAuthentication2
    template:
     - name: extension-quibble-composer

  - name: mediawiki/extensions/LDAPAuthorization
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/LDAPGroups
    template:
     - name: extension-quibble-composer

  - name: mediawiki/extensions/LDAPProvider
    template:
     - name: extension-quibble-composer

  - name: mediawiki/extensions/LDAPUserInfo
    template:
     - name: extension-quibble-composer

  - name: mediawiki/extensions/LifeWeb
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/LifeWebCore
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Lingo
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Link_Attributes
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/LinkedWiki
    template:
      - name: extension-broken  # T198919

  - name: mediawiki/extensions/LinkFilter
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/LinkSuggest
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/LinkSuggest2
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/LinkTarget
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ListSignup
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/LiveTranslate
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Lockdown
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/LockDownEnglishPages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/LogEntry
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/LogoFunctions
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/LookupUser
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/LoopFunctions
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Loops
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MadLib
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MagicNoCache
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MagicNumberedHeadings
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Mailgun
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/Maintenance
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MaintenanceShell
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MarkAsHelpful
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MassEditRegex
    template:
      - name: extension-quibble
      - name: extension-seccheck

  - name: mediawiki/extensions/MassMessageEmail
    template:
      - name: extension-quibble

  # Broken due to T87390 / T117659
  - name: mediawiki/extensions/MathSearch
    template:
      - name: extension-broken

  - name: mediawiki/extensions/MediaFunctions
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MediaWikiChat
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MediaWikiAuth
    template:
      - name: extension-quibble-noselenium

  - name: mediawiki/extensions/MediaWikiFarm
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/Memento
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MessageCommons
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Metadata
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/MetaMaster
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MiniInvite
    template:
     - name: extension-quibble
     - name: extension-phan

  - name: mediawiki/extensions/MinimumNameLength
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MintyDocs
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MissedPages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MixedNamespaceSearchSuggestions
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MobileDetect
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Model
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MolHandler
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MontserratFont
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MP3MediaHandler
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Mpdf
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/MsCalendar
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MsCatSelect
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MsInsert
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MsLinks
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MSSQLBackCompat
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MsUpload
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MsWikiEditor
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MultiBoilerplate
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MultiLanguageManager
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MultiMaps
    template:
      - name: extension-quibble
      - name: extension-coverage

  - name: mediawiki/extensions/MultimediaPlayer
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MultiUpload
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MusicBrainzAuth
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MWVersionInfo
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/MyVariables
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NamespaceHTML
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NamespacePaths
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NamespacePopups
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NamespaceRelations
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NamespaceSidebar
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NativeSvgHandler
    template:
      - name: extension-quibble
      - name: extension-seccheck
      - name: extension-phan

  - name: mediawiki/extensions/NaturalLanguageList
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Negref
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NetworkAuth
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NewestPages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/News
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NewsBox
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NewSignupPage
    template:
      - name: extension-quibble-noselenium

  - name: mediawiki/extensions/NewsTicker
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NewUserActions
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NewUserNotif
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NoBogusUserpages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NoCat
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NotebookViewer
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NotesLink
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NoTitle
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NSFileRepo
    template:
      - name: extension-quibble
      - name: mwgate-npm
      - name: extension-coverage

  - name: mediawiki/extensions/NukeDPL
    template:
      - name: extension-quibble
      - name: extension-seccheck
      - name: extension-phan

  - name: mediawiki/extensions/NumberFormat
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NumberOfWikis
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Numbertext
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/NumerAlpha
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/OAuthAuthentication
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/OdbcDatabase
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/OfflineImportLexicon
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/OnlineStatus
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/OnlineStatusBar
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/OnlyRecentRecentChanges
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/OOJSPlus
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/OOJsUIAjaxLogin
    template:
      - name: extension-quibble
      - name: extension-javascript-documentation

  - name: mediawiki/extensions/OpenBadges
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/OpenGraphMeta
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/OpenLayers
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/OpenID
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/OpenIDConnect
    template:
      - name: extension-quibble-noselenium
      - name: mwgate-npm

  - name: mediawiki/extensions/OpenJsCad
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/OpenStreetMapSlippyMap
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/OracleTextSearch
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/OrphanedTalkPages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PageBlock
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PageCreationNotif
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PageDisqus
    template:
      - name: extension-quibble-noselenium

  - name: mediawiki/extensions/PageForms
    template:
      - name: extension-quibble
      - name: extension-coverage

  - name: mediawiki/extensions/PageInCat
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PageLanguage
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PageNameFormula
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PageNotice
    template:
      - name: extension-quibble
      - name: extension-seccheck

  - name: mediawiki/extensions/PagePopups
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PageSchemas
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PagesList
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PageTools
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PaginateText
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PanScroll
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ParentPage
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ParserFun
    template:
     - name: extension-quibble-composer

  - name: mediawiki/extensions/PasswordlessLogin
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Patroller
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PCRGUIInserts
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PerPageLicense
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Petition
    template:
      - name: extension-quibble
      - name: extension-seccheck

  - name: mediawiki/extensions/PGFTikZ
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PhabTaskGraph
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PhpHighlight
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PhpTags
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PhpTagsFunctions
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PhpTagsMaps
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PhpTagsSMW
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/PhpTagsSPARQL
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PhpTagsStorage
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PhpTagsWidgets
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PhpTagsWiki
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PictureGame
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PipeEscape
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PluggableAuth
    template:
     - name: extension-quibble-noselenium

  - name: mediawiki/extensions/PluggableSSO
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Poll
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PollNY
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Polyglot
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PopcornEditor
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PopupAlerts
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PopupPages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PreferencesList
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PreferencesMaster
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Prezi
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PrimarySources
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PrivateDomains
    template:
      - name: extension-quibble-noselenium

  - name: mediawiki/extensions/PronunciationRecording
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Prop
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ProtectionIndicator
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ProtectSite
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PurgeClickThrough
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Push
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PushToWatch
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/PwnedPasswords
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Quantcast
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/QuickGV
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/QuickResponse
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/QuickSearchLookup
    template:
      - name: extension-quibble
      - name: extension-coverage

  - name: mediawiki/extensions/QuizGame
    template:
      - name: extension-quibble
      - name: extension-phan

  - name: mediawiki/extensions/QuizTabulate
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/RandomArea
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/RandomGameUnit
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/RandomImage
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/RandomImageByCategory
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/RandomInCategory
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/RandomPages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/RandomSelection
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ReassignEdits
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/reCaptcha
    template:
     - name: extension-quibble-composer-noselenium

  - name: mediawiki/extensions/Recoin
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/RefreshSpecial
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/RegexBlock
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/RegexFun
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/RegexFunctions
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/RelatedLinks
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/RelatedSites
    template:
      - name: extension-quibble
      - name: extension-seccheck

  - name: mediawiki/extensions/ReplaceSet
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/RevisionCommentSupplement
    template:
      - name: extension-broken  # T196529

  - name: mediawiki/extensions/RightFunctions
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/RT
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SacredText
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SafeDelete
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Sarcasm
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SaveSpinner
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ScanSet
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Screenplay
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Scribe
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ScrollableTables
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SearchStats
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SectionDisqus
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SecureAuth
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SecureHTML
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SecureSessions
    template:
      - name: extension-broken  # T110465

  - name: mediawiki/extensions/SelectCategory
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SelectTag
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SemanticACL
    template:
      - name: extension-broken  # Semantic MediaWiki is on GitHub

  - name: mediawiki/extensions/SemanticBundle
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SemanticDependency
    template:
     - name: extension-broken  # Semantic MediaWiki is on GitHub

  - name: mediawiki/extensions/SemanticDrilldown
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SemanticGenealogy
    template:
      - name: extension-broken  # Semantic MediaWiki is on GitHub

  - name: mediawiki/extensions/SemanticImageAnnotator
    template:
      - name: extension-broken  # Semantic MediaWiki is on GitHub

  - name: mediawiki/extensions/SemanticImageInput
    template:
      - name: extension-broken  # Semantic MediaWiki is on GitHub

  - name: mediawiki/extensions/SemanticInternalObjects
    template:
      - name: extension-broken  # Semantic MediaWiki is on GitHub

  - name: mediawiki/extensions/SemanticPageSeries
    template:
      - name: extension-broken  # Semantic MediaWiki is on GitHub

  - name: mediawiki/extensions/SemanticRating
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SemanticSifter
    template:
      - name: extension-broken  # Semantic MediaWiki is on GitHub

  - name: mediawiki/extensions/SemanticWebBrowser
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SendGrid
    template:
      - name: extension-quibble-composer
      - name: extension-phan
      - name: extension-coverage

  - name: mediawiki/extensions/SharedHelpPages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Shibboleth
    template:
      - name: extension-quibble-noselenium

  - name: mediawiki/extensions/ShortDescription
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/ShoutWikiAds
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ShoutWikiAPI
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ShowMe
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ShowRealUsernames
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SidebarDonateBox
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SideBarMenu
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/SignWritingMediaWikiPlugin
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SimpleChanges
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SimpleFarm
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SimpleSAMLphp
    template:
     - name: extension-quibble-noselenium

  - name: mediawiki/extensions/SimpleSecurity
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SimpleSort
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SiteMetrics
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SiteScout
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SiteSettings
    template:
      - name: extension-broken  # T196504

  - name: mediawiki/extensions/SkinPerNamespace
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SlimboxThumbs
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SmiteSpam
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SmoothGallery
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SocialLogin
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SocialProfile
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Sofa
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/SoftRedirector
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/SoftwareVersion
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Solarium
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SoundManager2Button
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SpamDiffTool
    template:
      - name: extension-quibble
      - name: extension-phan

  - name: mediawiki/extensions/SpamRegex
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Spark
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SparkPost
    template:
      - name: extension-quibble-composer
      - name: extension-phan

  - name: mediawiki/extensions/Special404
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SpecialNamespaces
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SpellingApi
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SpellingDictionary
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SphinxSearch
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/SplitPrivateWiki
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SportsTeams
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SSLClientAuthentication
    template:
      - name: extension-broken  # T110468

  - name: mediawiki/extensions/StaffEdits
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/StaffPowers
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/StalkerLog
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/StarterWiki
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/StatCounter
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/StickToThatLanguage
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/StlHandler
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/StringFunctionsEscaped
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SubpageFun
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Sudo
    template:
      - name: extension-quibble
      - name: extension-seccheck

  - name: mediawiki/extensions/Survey
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SVGEdit
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/SwiftMailer
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Tabber
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Tabs
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/TEI
    template:
      - name: extension-quibble
      - name: extension-seccheck

  - name: mediawiki/extensions/Teahouse
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/TemplateInfo
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/TestLanguageNameGrammar
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/TextScroller
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Theme
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/THICC
    template:
     - name: extension-quibble-composer

  - name: mediawiki/extensions/ThrottleOverride
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/TimelineTable
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/TimeMachine
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/TinyMCE
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/TitleKey
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/TitleIcon
    template:
      - name: extension-quibble-composer-noselenium

  - name: mediawiki/extensions/Tooltip
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/TopTenPages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/TranslateSvg
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/TweetANew
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/TwitterCards
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/TwitterLogin
    template:
      - name: extension-broken  # T110470

  - name: mediawiki/extensions/TwnMainPage
    template:
      - name: extension-quibble-composer

  - name: mediawiki/extensions/UIFeedback
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/UILangCode
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/UnblockMe
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/UnCaptcha
    template:
      - name: extension-quibble-noselenium

  - name: mediawiki/extensions/UnicodeConverter
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/UnusedRedirects
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/UpdateMediaWiki
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/UploadBlacklist
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/UploadLogo
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/UrlGetParameters
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/URNames
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/UserAgreement
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/UserExport
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/UserFunctions
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/UserGroups
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/UserOptionStats
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/UserPageEditProtection
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/UserPageViewTracker
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/UserStatus
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/UserThrottle
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Variables
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/VEForAll
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/VersionCompare
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Video
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Views
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/VIKI
    template:
     - name: extension-broken  # Semantic MediaWiki is on GitHub

  - name: mediawiki/extensions/VikiSemanticTitle
    template:
     - name: extension-broken  # Semantic MediaWiki is on GitHub

  - name: mediawiki/extensions/VikiTitleIcon
    template:
     - name: extension-broken  # Semantic MediaWiki is on GitHub

  - name: mediawiki/extensions/VirtualKeyboard
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/VoteNY
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/WantedPagesFromNS
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/WatchSubpages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/WebChat
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/WebDAV
    template:
     - name: extension-quibble-composer

  - name: mediawiki/extensions/WebDAVClientIntegration
    template:
     - name: extension-quibble-composer

  - name: mediawiki/extensions/WebDAVMinorSave
    template:
     - name: extension-quibble-composer

  - name: mediawiki/extensions/WebToolsManager
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/WhitelistPages
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/WhiteSpace
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/WhoIsWatching
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Whoops
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/WhosOnline
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Widgets
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/Wigo3
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/WikEdDiff
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/WikiArticleFeeds
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/WikiCategoryTagCloud
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/WikiForum
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/WikiLexicalData
    template:
      - name: extension-broken  # T198089

  - name: mediawiki/extensions/WikiLovesMonuments
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/WikipediaExtracts
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/WikiSEO
    template:
      - name: extension-quibble
      - name: extension-phan
      - name: extension-seccheck

  - name: mediawiki/extensions/Wikispeech
    template:
      - name: extension-quibble-noselenium
      - name: extension-coverage

  - name: mediawiki/extensions/WikiTextLoggedInOut
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/WindowsAzureStorage
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/WSArrays
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/XenForoAuth
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/XSL
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/YetAnotherKeywords
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/YotpoReviews
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/YouTube
    template:
      - name: extension-quibble

  - name: mediawiki/extensions/ZoomableImages
    template:
      - name: extension-quibble

#### MediaWiki-related services used in Wikimedia production ###

  - name: 3d2png
    # Repo doesn't yet pass; not enabling until this doesn't break the repo -- JDF 2019-06-12
    # template:
    #   - name: service-pipeline-test
    #   - name: service-pipeline-test-and-publish
    test:
      - 3d2png-npm-node-6-docker
    gate-and-submit:
      - 3d2png-npm-node-6-docker

  - name: 3d2png/deploy
    experimental:
      - 3d2png-deploy-npm-node-6-docker

  # eventgate-wikimedia contains the wikimedia specific
  # eventgate factory code and config.
  # https://github.com/wikimedia/eventgate is an npm
  # dependency.
  - name: eventgate-wikimedia
    template:
      - name: service-pipeline-test
      - name: service-pipeline-test-and-publish

  - name: mediawiki/services/eventstreams
    template:
      - name: service-pipeline-test
      - name: service-pipeline-test-and-publish

  - name: schemas/event/primary
    template:
      - name: node10-docker

  - name: schemas/event/secondary
    template:
      - name: node10-docker

  - name: mapdata
    template:
      - name: node10-browser-docker

  # To archive, once service has migrated to the pipeline
  - name: maps/kartotherian/deploy
    test:
      - noop
    gate-and-submit:
      - noop
    experimental:
      - kartotherian-deploy-npm-node-6-docker

  # To archive, once service has migrated to the pipeline
  - name: maps/tilerator/deploy
    test:
      - noop
    gate-and-submit:
      - noop
    experimental:
      - tilerator-deploy-npm-node-6-docker

  # To archive once schemas/event/{primary,secondary} are used everywhere.
  # https://phabricator.wikimedia.org/T240985
  - name: mediawiki/event-schemas
    template:
      - name: node10-docker

  - name: mediawiki/services/change-propagation
    template:
      - name: service-pipeline-test
      - name: service-pipeline-test-and-publish

  - name: mediawiki/services/change-propagation/deploy
    # Though the main repo is tested via the pipeline, it's still manually deployed without CI.
    # template:
    #  - name: archived

  - name: mediawiki/services/chromium-render
    template:
      - name: service-pipeline-test
      - name: service-pipeline-test-and-publish

  - name: mediawiki/services/chromium-render/deploy
    # Though the main repo is tested via the pipeline, it's still manually deployed with old CI. -- JDF 2019-08-05
    # template:
    #   - name: archived
    experimental:
      - chromium-render-deploy-npm-node-6-docker

  - name: mediawiki/services/citoid
    template:
      - name: service-pipeline-test
      - name: service-pipeline-test-and-publish

  - name: mediawiki/services/cxserver
    template:
      - name: service-pipeline-test
      - name: service-pipeline-test-and-publish

  - name: eventlogging
    test:
      - eventlogging-tox-docker
    gate-and-submit:
      - eventlogging-tox-docker

  - name: mediawiki/services/graphoid
    template:
      - name: service-pipeline-test
      - name: service-pipeline-test-and-publish

  - name: mediawiki/services/graphoid/deploy
    # Though the main repo is tested via the pipeline, it's still manually deployed with old CI.
    # template:
    #   - name: archived
    test:
      - graphoid-deploy-npm-node-6-docker
    gate-and-submit:
      - graphoid-deploy-npm-node-6-docker

  - name: mediawiki/services/jobrunner
    template:
      - name: composer-test-package-php72-or-later

  - name: mediawiki/services/kartotherian
    template:
      - name: service-pipeline-test
    test:
      - kartotherian-node10-browser-docker
    gate-and-submit:
      - kartotherian-node10-browser-docker
    postmerge:
      - trigger-kartotherian-pipeline-kartotherian
      - trigger-kartotherian-pipeline-tilerator
    publish:
      - trigger-kartotherian-pipeline-kartotherian
      - trigger-kartotherian-pipeline-tilerator

  - name: mediawiki/services/kask
    template:
      - name: service-pipeline-test
      - name: service-pipeline-test-and-publish

  - name: mediawiki/services/mathoid
    template:
      - name: service-pipeline-test
      - name: service-pipeline-test-and-publish

  - name: mediawiki/services/mobileapps
    template:
      - name: npm-docker
      - name: service-pipeline-test
      - name: service-pipeline-test-and-publish

  - name: mediawiki/services/mobileapps/deploy
    test:
      - mobileapps-deploy-npm-node-6-docker
    gate-and-submit:
      - mobileapps-deploy-npm-node-6-docker

  - name: mediawiki/services/parsoid
    test:
      - parsoidsvc-parsertests-docker
      - parsoidsvc-composer-package-php72-docker
      - parsoidsvc-composer-package-php73-docker
      - parsoidsvc-composer-package-php74-docker
    gate-and-submit:
      - parsoidsvc-parsertests-docker
      - parsoidsvc-composer-package-php72-docker
      - parsoidsvc-composer-package-php73-docker
      - parsoidsvc-composer-package-php74-docker
    postmerge:
      - parsoidsvc-doxygen-publish
      - phpunit-coverage-docker-publish
      - trigger-parsoid-pipeline-publish

  - name: mediawiki/services/parsoid/deploy
    test:
      - debian-glue-non-voting
      # FIXME: See T239642.
    gate-and-submit:
      # FIXME: See T239642.
      - noop
    experimental:
      - parsoidsvc-deploy-composer-testonly-php72-docker

  - name: mediawiki/services/poolcounter
    test:
      - debian-glue-non-voting
      - poolcounter-tox-docker
    gate-and-submit:
      - poolcounter-tox-docker

  - name: mediawiki/services/rcstream
    template:
      - name: tox-docker

  - name : mediawiki/services/recommendation-api
    template:
      - name: service-pipeline-test
      - name: service-pipeline-test-and-publish
    test:
      - recommendation-api-npm-node-6-docker
    gate-and-submit:
      - recommendation-api-npm-node-6-docker

  - name : mediawiki/services/recommendation-api/deploy
    test:
      - recommendation-api-deploy-npm-node-6-docker
    gate-and-submit:
      - recommendation-api-deploy-npm-node-6-docker

  - name: mediawiki/services/kafka-watcher
    template:
      - name: tox-docker

  - name: mediawiki/services/wikifeeds
    template:
      - name: service-pipeline-test
      - name: service-pipeline-test-and-publish

  - name: mediawiki/services/zotero
    template:
      - name: service-pipeline-test
      - name: service-pipeline-test-and-publish

    # Primarily developed on github.
    # The changes are manually pushed to gerrit.
  - name: mediawiki/services/restbase
    template:
      - name: service-pipeline-test
      - name: service-pipeline-test-and-publish

#### Wikimedia analytics tools #################################

  - name: analytics/aggregator
    template:
      - name: tox-docker

  - name: analytics/aqs
    template:
      - name: node10-docker

  - name: analytics/blog
    template:
      - name: tox-docker

  - name: analytics/dashiki
    experimental:
      - generic-node10-docker

  - name: analytics/geowiki
    template:
      - name: tox-docker

  - name: analytics/quarry/web
    template:
      - name: tox-docker
      - name: node10-docker

  - name: analytics/limn-mobile-data
    template:
      - name: tox-docker

  - name: analytics/limn-language-data
    test:
     - noop
    gate-and-submit:
     - noop

  - name: analytics/mediawiki-storage
    template:
      - name: node10-browser-docker

  - name: analytics/multimedia
    template:
      - name: tox-docker

  - name: analytics/refinery/source
    test:
     - analytics-refinery-maven-java8-docker
    gate-and-submit:
     - analytics-refinery-maven-java8-docker

  - name: analytics/reportupdater
    template:
      - name: tox-docker

  - name: analytics/wikistats
    test:
     - analytics-wikistats
    gate-and-submit:
     - analytics-wikistats
    postmerge:
     - analytics-wikistats

  - name: analytics/wikistats2
    template:
      - name: node10-browser-docker

  - name: analytics/wikimetrics
    template:
      - name: tox-docker

  - name: analytics/wmde/scripts
    test:
      - composer-php70-docker
    gate-and-submit:
      - composer-php70-docker

  - name: analytics/wmde/toolkit-analyzer
    test:
      - analytics-wmde-toolkit-analyzer-maven-java8-docker
    gate-and-submit:
      - analytics-wmde-toolkit-analyzer-maven-java8-docker

  - name: analytics/wmde/toolkit-analyzer-build
    gate-and-submit:
     - noop

  - name: analytics/wmde/WDCM
    test:
     - noop
     - lintr-docker-non-voting
    gate-and-submit:
     - noop
    experimental:
     - lintr-docker

  - name: analytics/wmde/WDCM-packages
    test:
     - noop
    gate-and-submit:
     - noop

  - name: analytics/wmde/WDCM-Overview-Dashboard
    test:
     - noop
    gate-and-submit:
     - noop

  - name: analytics/wmde/WDCM-Semantics-Dashboard
    test:
     - noop
    gate-and-submit:
     - noop

  - name: analytics/wmde/WDCM-Usage-Dashboard
    test:
     - noop
    gate-and-submit:
     - noop

  - name: analytics/wmde/WDCM-ShinyServerFrontPage
    test:
     - noop
    gate-and-submit:
     - noop

  - name: node-rdkafka-statsd
    template:
      - name: node10-docker

#### PHP Extensions ###################################################

  - name: mediawiki/php/excimer
    # excimer is PHP 7.1+ only
    template:
      - name: php-compile-php71-or-later

  - name: mediawiki/php/luasandbox
    template:
      - name: php-compile-php70-or-later
    postmerge:
      - doxygen-publish

  - name: mediawiki/php/wikidiff2
    template:
      - name: php-compile-php70-or-later

  - name: mediawiki/php/wmerrors
    template:
      - name: php-compile-php71-or-later

  - name: mediawiki/oauthclient-php
    template:
      - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

#### MediaWiki libraries #######################################

  - name: cdb
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: purtle
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: utfnormal
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: at-ease
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: base-convert
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: css-sanitizer
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: php-session-serializer
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: AhoCorasick
    template:
      - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: RunningStat
    template:
      - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: IPSet
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: RelPath
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: wikipeg
    test:
      - wikipeg-npm-php-docker
    gate-and-submit:
      - wikipeg-npm-php-docker

  - name: WrappedString
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: CLDRPluralRuleParser
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: HtmlFormatter
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: mediawiki/libs/alea
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: mediawiki/libs/Assert
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: mediawiki/libs/Equivset
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: mediawiki/libs/etcd
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: mediawiki/libs/IPUtils
    template:
      - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: mediawiki/libs/LangConv
    template:
      - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: mediawiki/libs/ObjectFactory
    template:
      - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: mediawiki/libs/PasswordBlacklist
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: mediawiki/libs/RemexHtml
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: mediawiki/libs/ScopedCallback
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: mediawiki/libs/Services
    template:
      - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: mediawiki/libs/Timestamp
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: mediawiki/libs/WaitConditionLoop
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: mediawiki/libs/XMPReader
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: mediawiki/libs/Zest
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

#### Tools deployed on Wikimedia Cloud Services (aka "Labs") ###

  - name: labs/codesearch
    template:
      - name: tox-docker

  - name: labs/libraryupgrader
    template:
      - name: tox-docker

  - name: labs/libraryupgrader/config
    template:
      - name: tox-docker

  - name: labs/striker
    test:
      - labs-striker-tox-docker
    gate-and-submit:
      - labs-striker-tox-docker

  - name: labs/striker/deploy
    test:
      - noop
    gate-and-submit:
      - noop

  - name: labs/striker/staticfiles
    test:
      - noop
    gate-and-submit:
      - noop

  - name: labs/striker/wheels
    test:
      - noop
    gate-and-submit:
      - noop

  - name: labs/toollabs
    template:
      - name: tox-docker
    test:
     # Single branch supporting multiple distributions T210780
     - debian-glue-unstable
     - debian-glue-jessie
     - debian-glue-stretch
     - debian-glue-buster
    gate-and-submit:
     - debian-glue-unstable
     - debian-glue-jessie
     - debian-glue-stretch
     - debian-glue-buster

  - name: labs/tools/bookreader
    template:
      - name: tox-docker

  - name: labs/tools/cdnjs-index
    template:
      - name: tox-docker

  - name: labs/tools/commons-mass-description
    test:
      - labs-tools-commons-mass-description-tox-docker
    gate-and-submit:
      - labs-tools-commons-mass-description-tox-docker
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker

  - name: labs/tools/crosswatch
    template:
      - name: tox-docker
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker

  - name: labs/tools/extdist
    template:
      - name: tox-docker

  - name: labs/tools/extreg-wos
    template:
      - name: tox-docker

  - name: labs/tools/forrestbot
    template:
      - name: tox-docker

  - name: labs/tools/gblrenamemon
    template:
      - name: tox-docker

  - name: labs/tools/harvesting-data-refinery
    test:
      - labs-tools-harvesting-data-refinery-tox-docker
    gate-and-submit:
      - labs-tools-harvesting-data-refinery-tox-docker

  - name: labs/tools/heritage
    template:
      - name: node10-docker
    test:
      - composer-php72-docker
      - labs-tools-heritage-tox-docker
    gate-and-submit:
      - composer-php72-docker
      - labs-tools-heritage-tox-docker
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker
    postmerge:
     - tox-py27-coverage-publish

  - name: labs/tools/indic-wscontest
    template:
      - name: tox-docker

  - name: labs/tools/ipwatcher
    test:
      - labs-tools-ipwatcher-tox-docker
    gate-and-submit:
      - labs-tools-ipwatcher-tox-docker
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker

  - name: labs/tools/urbanecmbot
    test:
      - labs-tools-urbanecmbot-tox-docker
    gate-and-submit:
      - labs-tools-urbanecmbot-tox-docker

  - name: labs/tools/guc
    test:
      - composer-php72-docker
    gate-and-submit-l10n:
     - mediawiki-i18n-check-docker
    gate-and-submit:
      - composer-php72-docker

  - name: labs/tools/Isa
    test:
      - labs-tools-Isa-tox-docker
    gate-and-submit:
      - labs-tools-Isa-tox-docker

  - name: labs/tools/ldap
    test:
      - labs-tools-ldap-tox-docker
    gate-and-submit:
      - labs-tools-ldap-tox-docker

  - name: labs/tools/maintain-kubeusers
    template:
      - name: tox-docker

  - name: labs/tools/map-of-monuments
    test:
      - labs-tools-map-of-monuments-tox-docker
    gate-and-submit:
      - labs-tools-map-of-monuments-tox-docker
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker

  - name: labs/tools/massmailer
    test:
      - labs-tools-massmailer-tox-docker
    gate-and-submit:
      - labs-tools-massmailer-tox-docker

  - name: labs/tools/ptable
    template:
      - name: tox-docker

  - name: labs/tools/shorturls
    template:
      - name: tox-docker

  - name: labs/tools/stashbot
    template:
      - name: tox-docker

  - name: labs/tools/stewardbots
    template:
      - name: composer-test-package-php72-or-later
      - name: tox-docker

  - name: labs/tools/VideoCutTool
    template:
      - name: node10-browser-docker

  - name: labs/tools/video-cut-tool-back-end
    template:
      - name: node10-browser-docker

  - name: labs/tools/watch-translations
    test:
      - labs-tools-watch-translations-tox-docker
    gate-and-submit:
      - labs-tools-watch-translations-tox-docker
    gate-and-submit-l10n:
     - mediawiki-i18n-check-docker

  - name: labs/tools/weapon-of-mass-description
    test:
      - labs-tools-weapon-of-mass-description-tox-docker
    gate-and-submit:
      - labs-tools-weapon-of-mass-description-tox-docker
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker

  - name: labs/tools/wiki2email
    test:
      - labs-tools-wiki2email-tox-docker
    gate-and-submit:
      - labs-tools-wiki2email-tox-docker
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker

  - name: labs/tools/wikibugs2
    template:
      - name: tox-docker
    postmerge:
     - labs-tools-wikibugs2-autopull

  - name: labs/tools/wikidata-slicer
    template:
      - name: node10-docker
      - name: tox-docker

  - name: labs/tools/wikinity
    test:
      - labs-tools-wikinity-tox-docker
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker
    gate-and-submit:
      - labs-tools-wikinity-tox-docker

  - name: labs/tools/awmd-stats
    template:
      - name: tox-docker

  - name: labs/tools/graphql
    template:
      - name: node10-docker

#### pywikibot #################################################

  - name: pywikibot/core
    test:
      - pywikibot-core-tox-docker
      - pywikibot-core-tox-fasttest-py27-docker
      - pywikibot-core-tox-fasttest-py35-docker
      - pywikibot-core-tox-doc-docker
    gate-and-submit:
      - pywikibot-core-tox-docker
      - pywikibot-core-tox-fasttest-py27-docker
      - pywikibot-core-tox-fasttest-py35-docker
      - pywikibot-core-tox-doc-docker
    postmerge:
      - pywikibot-core-tox-publish

  - name: pywikibot/i18n
    template:
      - name: node10-docker
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker

  - name: pywikibot/wikibase
    test:
      - pywikibot-wikibase-tox-docker
    gate-and-submit:
      - pywikibot-wikibase-tox-docker

  - name: pywikibot/bots/CommonsDelinker
    test:
      - pywikibot-CommonsDelinker-tox-docker
    gate-and-submit:
      - pywikibot-CommonsDelinker-tox-docker

  - name: pywikibot/bots/xqbot
    test:
      - pywikibot-xqbot-tox-docker
    gate-and-submit:
      - pywikibot-xqbot-tox-docker

  - name: pywikibot/bots/FLOSSbot
    test:
      - pywikibot-FLOSSbot-tox-docker
    gate-and-submit:
      - pywikibot-FLOSSbot-tox-docker

#### Other tools ###############################################

  - name: mediawiki/ruby/api
    test:
      - mediawiki-ruby-api-rake-docker
    gate-and-submit:
      - mediawiki-ruby-api-rake-docker
    postmerge:
     - mediawiki-ruby-api-bundle-yard-publish

  - name: mediawiki/selenium
    test:
     - mediawiki-selenium-rake-docker
     - mediawiki-selenium-integration-docker
    gate-and-submit:
     - mediawiki-selenium-rake-docker
     - mediawiki-selenium-integration-docker
    postmerge:
     - mediawiki-selenium-bundle-yard-publish

  - name: wikimedia/security/tooling
    template:
      - name: tox-docker

  - name: wikimedia/slimapp
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: wikimedia/portals
    template:
      - name: node10-browser-docker
      - name: service-pipeline-test
      - name: service-pipeline-test-and-publish
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker

  - name: wikimedia/portals/deploy
    template:
      - name: node10-browser-docker

  - name: search/extra
    template:
      - name: java-codehealth
    test:
      - search-extra-maven-java8-docker
    gate-and-submit:
      - search-extra-maven-java8-docker
    postmerge:
      - search-extra-maven-java8-docker-site-publish

  - name: search/extra-analysis
    template:
      - name: java-codehealth
    test:
      - search-extra-analysis-maven-java8-docker
    gate-and-submit:
      - search-extra-analysis-maven-java8-docker
    postmerge:
      - search-extra-analysis-maven-java8-docker-site-publish

  - name: search/glent
    template:
      - name: java-codehealth
    test:
        - search-glent-maven-java8-docker
    gate-and-submit:
        - search-glent-maven-java8-docker
    postmerge:
        - search-glent-maven-java8-docker-site-publish

  - name: search/highlighter
    template:
      - name: java-codehealth
    test:
      - search-highlighter-maven-java8-docker
    gate-and-submit:
      - search-highlighter-maven-java8-docker
    postmerge:
      - search-highlighter-maven-java8-docker-site-publish

  - name: search/xgboost
    test:
      - search-xgboost-maven-java8-docker
    gate-and-submit:
      - search-xgboost-maven-java8-docker

  - name: search/MjoLniR
    test:
      - search-mjolnir-tox-docker
      - search-mjolnir-maven-java8-docker
    gate-and-submit:
      - search-mjolnir-tox-docker
      - search-mjolnir-maven-java8-docker

  - name: operations/software/gerrit/plugins/barricade
    test:
      - gerrit-plugins-barricade-maven-java8-docker
    gate-and-submit:
      - gerrit-plugins-barricade-maven-java8-docker
#    postmerge:
#      - gerrit-plugins-barricade-maven-java8-docker-site-publish

  - name: design/landing-page
    template:
      - name: node10-docker

  - name: oojs/core
    test:
      - oojs-core-node10-browser-docker
    gate-and-submit:
      - oojs-core-node10-browser-docker
    postmerge:
      - generic-node10-docs-docker-publish
      - generic-node10-browser-coverage-docker-publish
    publish:
      - generic-node10-docs-docker-publish

  - name: oojs/router
    test:
      - oojs-router-node10-browser-docker
    gate-and-submit:
      - oojs-router-node10-browser-docker
    postmerge:
      - generic-node10-docs-docker-publish
      - generic-node10-browser-coverage-docker-publish

  - name: oojs/ui
    # composer is run by npm-run-jenkins T155483
    template:
     - name: composer-test-package-php72-or-later
    test:
      - ooui-npm-special-node10-plus-composer-docker
      - oojs-ui-rake-docker
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker
    gate-and-submit:
      - ooui-npm-special-node10-plus-composer-docker
      - oojs-ui-rake-docker
    postmerge:
      - oojs-ui-doxygen-publish
      - oojs-ui-docker-publish

  - name: jsdoc/wmf-theme
    template:
      - name: node10-docker

  - name: unicodejs
    test:
      - unicodejs-node10-browser-docker
      - generic-node10-rundoc-docker
    gate-and-submit:
      - unicodejs-node10-browser-docker
      - generic-node10-rundoc-docker
    postmerge:
      - generic-node10-browser-coverage-docker-publish
      - generic-node10-docs-docker-publish
    publish:
      - generic-node10-docs-docker-publish

  - name: VisualEditor/VisualEditor
    test:
      - visualeditor-node10-browser-docker
      - generic-node10-rundoc-docker
      - visualeditor-rake-docker
    gate-and-submit:
      - visualeditor-node10-browser-docker
      - generic-node10-rundoc-docker
      - visualeditor-rake-docker
    test-1_31:
      - visualeditor-node10-browser-docker
      - generic-node10-rundoc-docker
      - visualeditor-rake-docker
    gate-and-submit-1_31:
      - visualeditor-node10-browser-docker
      - generic-node10-rundoc-docker
      - visualeditor-rake-docker
    test-1_33:
      - visualeditor-node10-browser-docker
      - generic-node10-rundoc-docker
      - visualeditor-rake-docker
    gate-and-submit-1_33:
      - visualeditor-node10-browser-docker
      - generic-node10-rundoc-docker
      - visualeditor-rake-docker
    test-1_34:
      - visualeditor-node10-browser-docker
      - generic-node10-rundoc-docker
      - visualeditor-rake-docker
    gate-and-submit-1_34:
      - visualeditor-node10-browser-docker
      - generic-node10-rundoc-docker
      - visualeditor-rake-docker
    test-wmf:
      - visualeditor-node10-browser-docker
      - generic-node10-rundoc-docker
      - visualeditor-rake-docker
    gate-and-submit-wmf:
      - visualeditor-node10-browser-docker
      - generic-node10-rundoc-docker
      - visualeditor-rake-docker
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker
    postmerge:
      - generic-node10-browser-coverage-docker-publish

  - name: wikidata/query/rdf
    template:
      - name: java-codehealth
    test:
      - wikidata-query-rdf-maven-java8-docker
    gate-and-submit:
      - wikidata-query-rdf-maven-java8-docker
    postmerge:
      - wikidata-query-rdf-maven-java8-docker-site-publish

  - name: wikidata/query/blazegraph
    test:
      - wikidata-query-blazegraph-maven-java8-docker
    gate-and-submit:
      - wikidata-query-blazegraph-maven-java8-docker

  - name: wikidata/query/gui
    template:
      - name: node10-browser-docker
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker
    postmerge:
      - wikidata-query-gui-build

  - name: wikidata/query/gui-deploy
    experimental:
      - npm-node-6-docker

  - name: wikibase/javascript-api
    template:
      - name: node10-browser-docker

  - name: wikibase/termbox
    template:
      - name: service-pipeline-test
      - name: service-pipeline-test-and-publish
    postmerge:
      - generic-node10-docs-docker-publish

  - name: wikibase/vuejs-components
    template:
        - name: service-pipeline-test
    postmerge:
      - generic-node10-docs-docker-publish
    publish:
      - generic-node10-docs-docker-publish

  - name: wikibase/property-suggester-scripts
    template:
      - name: tox-docker

  - name: wikimedia/bots/jouncebot
    template:
      - name: tox-docker

  - name: avro-php
    template:
     - name: composer-test-package-php72-or-later

  - name: data-values/value-view
    template:
     - name: node10-browser-docker
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker

  - name: testing-access-wrapper
    template:
     - name: composer-test-package-php72-or-later
    postmerge:
      - doxygen-publish
      - phpunit-coverage-docker-publish

  - name: research/ores/wheels
    test:
      - noop
    gate-and-submit:
      - noop

  - name: scoring/ores/assets
    test:
      - noop
    gate-and-submit:
      - noop

  - name: test/gerrit-ping
    test:
      - noop
    gate-and-submit:
      - noop

  - name: wmf-utils
    test:
      - wmf-utils-tox-docker
    gate-and-submit:
      - wmf-utils-tox-docker

  - name: wikipedia/gadgets/ProveIt
    template:
      - name: node10-docker
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker
    gate-and-submit:
      - noop

  - name: react.i18n
    template:
      - name: node10-docker

  - name: react.ooui
    template:
      - name: node10-docker

  - name: research/recommendation-api
    template:
      - name: tox-docker
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker

  - name: translatewiki
    test:
      - translatewiki-rake-docker
      - composer-php72-docker
    gate-and-submit:
      - translatewiki-rake-docker
      - composer-php72-docker

  - name: wikimedia-cz/tracker
    template:
      - name: node10-browser-docker
    test:
      - wikimedia-cz-tracker-tox-docker
    gate-and-submit:
      - wikimedia-cz-tracker-tox-docker
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker

  - name: wikimedia-cz/tools
    test:
      - wikimedia-cz-tools-tox-docker
    gate-and-submit:
      - wikimedia-cz-tools-tox-docker

  - name: wikimedia-cz/events
    test:
      - wikimedia-cz-events-tox-docker
    gate-and-submit:
      - wikimedia-cz-events-tox-docker

  - name: wikimedia-cz/mediawiki-config
    test:
      - wikimedia-cz-mediawiki-config-composer-php70-docker
    gate-and-submit:
      - wikimedia-cz-mediawiki-config-composer-php70-docker

  - name: wikimedia-cz/web-theme
    test:
      - composer-php72-docker
    gate-and-submit:
      - composer-php72-docker

  - name: wikimedia-cz/web-plugin
    test:
      - composer-php72-docker
    gate-and-submit:
      - composer-php72-docker

  - name: wikimedia-ui-base
    template:
      - name: node10-docker

  - name: wikimedia/discovery/discovery-parent-pom
    test:
      - discovery-parent-pom-maven-java8-docker
    gate-and-submit:
      - discovery-parent-pom-maven-java8-docker
    postmerge:
      - discovery-parent-pom-maven-java8-docker-site-publish

  - name: wikimedia/discovery/discovery-maven-tool-configs
    test:
      - discovery-maven-tool-configs-maven-java8-docker
    gate-and-submit:
      - discovery-maven-tool-configs-maven-java8-docker
    postmerge:
      - discovery-maven-tool-configs-maven-java8-docker-site-publish

  - name: wikimedia/discovery/relevanceForge
    template:
      - name: tox-docker

  - name: wikimedia/discovery/analytics
    test:
      - wikimedia-discovery-analytics-tox-docker
    gate-and-submit:
      - wikimedia-discovery-analytics-tox-docker

  - name: wikimedia/fundraising/dash
    template:
      - name: node10-browser-docker

  - name: wikimedia/fundraising/tools/DjangoBannerStats
    template:
      - name: tox-docker

  - name: wikimedia/fundraising/process-control
    template:
      - name: tox-docker

  - name: wikimedia/fundraising/stats
    gate-and-submit:
      - noop
    experimental:
      - tox-docker

  - name: wikimedia/fundraising/tools
    test:
      - fundraising-tools-tox-docker
    gate-and-submit:
      - fundraising-tools-tox-docker

  - name: wikimedia/fundraising/crm
    test:
      - wikimedia-fundraising-crm-composer-php72-docker
      - wikimedia-fundraising-civicrm-docker
    gate-and-submit:
      - wikimedia-fundraising-civicrm-docker
    experimental:
      - wikimedia-fundraising-crm-composer-php70-docker

  - name: wikimedia/fundraising/crm/civicrm
    test:
      - wikimedia-fundraising-civicrm-docker
    gate-and-submit:
      - wikimedia-fundraising-civicrm-docker

  - name: wikimedia/fundraising/crm/drupal
    test:
      - wikimedia-fundraising-civicrm-docker
    gate-and-submit:
      - wikimedia-fundraising-civicrm-docker

  - name: wikimedia/fundraising/crm/vendor
    test:
      - wikimedia-fundraising-civicrm-docker
    gate-and-submit:
      - wikimedia-fundraising-civicrm-docker

  - name: wikimedia/fundraising/slander
    template:
      - name: tox-docker

  - name: wikimedia/fundraising/SmashPig
    test:
      - composer-php70-docker
    gate-and-submit:
      - composer-php70-docker

  - name: wikimedia/iegreview
    template:
     - name: composer-test
    gate-and-submit-l10n:
     - mediawiki-i18n-check-docker

  - name: wikimedia/wikimania-scholarships
    template:
      - name: node10-browser-docker
    test: &wikimania-scholarships-test
      - composer-php72-docker
    gate-and-submit-l10n:
      - mediawiki-i18n-check-docker
    gate-and-submit: *wikimania-scholarships-test

  - name: wikimedia/textcat
    template:
     - name: composer-test-package-php72-or-later

  - name: wikimedia/lucene-explain-parser
    template:
     - name: composer-test-package-php72-or-later

#### Archive repositories ######################################

  - name: apps/android/java-mwapi
    template:
     - name: archived

  - name: apps/android/wikipedia
    template:
     - name: archived

  - name: apps/ios/wikipedia
    template:
     - name: archived

  - name: integration/phpunit
    template:
     - name: archived

  - name: labs/migration-assistant
    template:
     - name: archived

  - name: labs/nagios-builder
    template:
     - name: archived

  - name: labs/tools/bub
    template:
     - name: archived

  - name: labs/tools/connectivity
    template:
     - name: archived

  - name: labs/tools/coursestats
    template:
     - name: archived

  - name: labs/tools/discordwiki
    template:
     - name: archived

  - name: labs/tools/flow-oauth-demo
    template:
     - name: archived

  - name: labs/tools/grrrit
    template:
     - name: archived

  - name: labs/tools/Luke081515IRCBot
    template:
     - name: archived

  - name: labs/tools/signpost
    template:
     - name: archived

  - name: labs/tools/wikicaptcha
    template:
     - name: archived

  - name: labs/tools/Wikimedia-Emoji-Bot
    template:
     - name: archived

  - name: maps/kartotherian
    template:
     - name: archived

  # Don't ask. -- JDF 2019-09-16
  # - name: maps/kartotherian/package
  #   template:
  #    - name: archived

  - name: maps/tilerator
    template:
     - name: archived

  - name: marvin
    template:
     - name: archived

  - name: mediawiki/extensions/AccessibilitySimulation
    template:
     - name: archived

  - name: mediawiki/extensions/ActionEditSubmit
    template:
     - name: archived

  - name: mediawiki/extensions/ActivityMonitor
    template:
     - name: archived

  - name: mediawiki/extensions/Ads
    template:
     - name: archived

  - name: mediawiki/extensions/Agora
    template:
     - name: archived

  - name: mediawiki/extensions/AjaxLogin
    template:
     - name: archived

  - name: mediawiki/extensions/Annotator
    template:
     - name: archived

  - name: mediawiki/extensions/AntiBot
    template:
     - name: archived

  - name: mediawiki/extensions/APC
    template:
     - name: archived

  - name: mediawiki/extensions/ApiExplorer
    template:
     - name: archived

  - name: mediawiki/extensions/ApiSandbox
    template:
     - name: archived

  - name: mediawiki/extensions/ApiSVGProxy
    template:
     - name: archived

  - name: mediawiki/extensions/ArticleComments
    template:
     - name: archived

  - name: mediawiki/extensions/ArticleFeedback
    template:
     - name: archived

  - name: mediawiki/extensions/AssertEdit
    template:
     - name: archived

  - name: mediawiki/extensions/AutomaticBoardWelcome
    template:
     - name: archived

  - name: mediawiki/extensions/AWS
    template:
     - name: archived

  - name: mediawiki/extensions/BayesianFilter
    template:
     - name: archived

  - name: mediawiki/extensions/BlameMaps
    template:
     - name: archived

  - name: mediawiki/extensions/BlueSpiceMenues
    template:
      - name: archived

  - name: mediawiki/extensions/BookManager
    template:
     - name: archived

  - name: mediawiki/extensions/BookManagerv2
    template:
     - name: archived

  - name: mediawiki/extensions/Bootstrap
    template:
     - name: archived

  - name: mediawiki/extensions/CategorySlideShow
    template:
     - name: archived

  - name: mediawiki/extensions/ClickTracking
    template:
     - name: archived

  - name: mediawiki/extensions/ClientSide
    template:
     - name: archived

  - name: mediawiki/extensions/Collection/OfflineContentGenerator
    template:
     - name: archived

  - name: mediawiki/extensions/Collection/OfflineContentGenerator/bundler
    template:
     - name: archived

  - name: mediawiki/extensions/Collection/OfflineContentGenerator/latex_renderer
    template:
     - name: archived

  - name: mediawiki/extensions/Collection/OfflineContentGenerator/text_renderer
    template:
     - name: archived

  - name: mediawiki/extensions/Collection/OfflineContentGenerator/zim_renderer
    template:
     - name: archived

  - name: mediawiki/extensions/CommentPages
    template:
     - name: archived

  - name: mediawiki/extensions/CommunityApplications
    template:
     - name: archived

  - name: mediawiki/extensions/CommunityHiring
    template:
     - name: archived

  - name: mediawiki/extensions/CommunityTwitter
    template:
     - name: archived

  - name: mediawiki/extensions/CommunityVoice
    template:
     - name: archived

  - name: mediawiki/extensions/ConditionalShowSection
    template:
     - name: archived

  - name: mediawiki/extensions/Configure
    template:
     - name: archived

  - name: mediawiki/extensions/Contest
    template:
     - name: archived

  - name: mediawiki/extensions/ContributionReporting
    template:
     - name: archived

  - name: mediawiki/extensions/ContributorsAddon
    template:
     - name: archived

  - name: mediawiki/extensions/ConventionExtension
    template:
     - name: archived

  - name: mediawiki/extensions/Convert2Wiki
    template:
     - name: archived

  - name: mediawiki/extensions/Copyvio
    template:
     - name: archived

  - name: mediawiki/extensions/CreditTab
    template:
     - name: archived

  - name: mediawiki/extensions/CryoKey
    template:
     - name: archived

  - name: mediawiki/extensions/CustomData
    template:
     - name: archived

  - name: mediawiki/extensions/CustomPage
    template:
     - name: archived

  - name: mediawiki/extensions/CustomSidebar
    template:
     - name: archived

  - name: mediawiki/extensions/CustomUserSignup
    template:
     - name: archived

  - name: mediawiki/extensions/DataTypes
    template:
     - name: archived

  - name: mediawiki/extensions/Dice
    template:
     - name: archived

  - name: mediawiki/extensions/DidYouMean
    template:
     - name: archived

  - name: mediawiki/extensions/DjangoAnalytics
    template:
     - name: archived

  - name: mediawiki/extensions/E3Experiments
    template:
     - name: archived

  - name: mediawiki/extensions/EditAccount
    template:
     - name: archived

  - name: mediawiki/extensions/EditOwn
    template:
     - name: archived

  - name: mediawiki/extensions/EditPageTracking
    template:
     - name: archived

  - name: mediawiki/extensions/EducationProgram
    template:
     - name: archived

  - name: mediawiki/extensions/EtherEditor
    template:
     - name: archived

  - name: mediawiki/extensions/ExpandTemplates
    template:
     - name: archived

  - name: mediawiki/extensions/FeedsFromPrivateWikis
    template:
     - name: archived

  - name: mediawiki/extensions/FirstSteps
    template:
     - name: archived

  - name: mediawiki/extensions/FormatNum
    template:
     - name: archived

  - name: mediawiki/extensions/Foxway
    template:
     - name: archived

  - name: mediawiki/extensions/FundraisingChart
    template:
     - name: archived

  - name: mediawiki/extensions/Gather
    template:
     - name: archived

  - name: mediawiki/extensions/Genderize
    template:
     - name: archived

  - name: mediawiki/extensions/GitHub
    template:
     - name: archived

  - name: mediawiki/extensions/GoogleAPIClient
    template:
     - name: archived

  - name: mediawiki/extensions/GoogleMaps
    template:
     - name: archived

  - name: mediawiki/extensions/GooglePlusOne
    template:
     - name: archived

  - name: mediawiki/extensions/ImageLink
    template:
     - name: archived

  - name: mediawiki/extensions/ImageMetrics
    template:
      - name: archived

  - name: mediawiki/extensions/ImageTagging
    template:
     - name: archived

  - name: mediawiki/extensions/InterwikiIntegration
    template:
     - name: archived

  - name: mediawiki/extensions/InterwikiMagic
    template:
     - name: archived

  - name: mediawiki/extensions/InterwikiMap
    template:
     - name: archived

  - name: mediawiki/extensions/IssueTracker
    template:
     - name: archived

  - name: mediawiki/extensions/JADE
    template:
     - name: archived

  - name: mediawiki/extensions/LdapGroups
    template:
      - name: archived

  - name: mediawiki/extensions/Less
    template:
     - name: archived

  - name: mediawiki/extensions/LightweightRDFa
    template:
     - name: archived

  - name: mediawiki/extensions/Limn
    template:
     - name: archived

  - name: mediawiki/extensions/Mantle
    template:
     - name: archived

  - name: mediawiki/extensions/MassAction
    template:
     - name: archived

  - name: mediawiki/extensions/Minifier
    template:
     - name: archived

  - name: mediawiki/extensions/MOOC
    template:
     - name: archived

  - name: mediawiki/extensions/Moodle
    template:
     - name: archived

  - name: mediawiki/extensions/MwEmbedSupport
    template:
     - name: archived

  - name: mediawiki/extensions/MWSearch
    template:
     - name: archived

  - name: mediawiki/extensions/NewUsersList
    template:
     - name: archived

  - name: mediawiki/extensions/Nonlinear
    template:
     - name: archived

  - name: mediawiki/extensions/normal
    template:
     - name: archived

  - name: mediawiki/extensions/Nostalgia
    template:
     - name: archived

  - name: mediawiki/extensions/NumberOfComments
    template:
     - name: archived

  - name: mediawiki/extensions/OAI
    template:
     - name: archived

  - name: mediawiki/extensions/OAuth2
    template:
      - name: archived

  - name: mediawiki/extensions/Offline
    template:
     - name: archived

  - name: mediawiki/extensions/OggHandler
    template:
     - name: archived

  - name: mediawiki/extensions/OpenSearchXml
    template:
     - name: archived

  - name: mediawiki/extensions/Oversight
    template:
     - name: archived

  - name: mediawiki/extensions/Parsoid
    template:
     - name: archived

  - name: mediawiki/extensions/PdfExport
    template:
     - name: archived

  - name: mediawiki/extensions/Phalanx
    template:
     - name: archived

  - name: mediawiki/extensions/PHPExcel
    template:
     - name: archived

  - name: mediawiki/extensions/Pickle
    template:
     - name: archived

  - name: mediawiki/extensions/PlanOut
    template:
     - name: archived

  - name: mediawiki/extensions/PostEdit
    template:
     - name: archived

  - name: mediawiki/extensions/PrefStats
    template:
     - name: archived

  - name: mediawiki/extensions/PrefSwitch
    template:
     - name: archived

  - name: mediawiki/extensions/Premoderation
    template:
     - name: archived

  - name: mediawiki/extensions/PubSubHubbub
    template:
     - name: archived

  - name: mediawiki/extensions/PureWikiDeletion
    template:
     - name: archived

  - name: mediawiki/extensions/RandomFeaturedUser
    template:
     - name: archived

  - name: mediawiki/extensions/RandomRootPage
    template:
     - name: archived

  - name: mediawiki/extensions/RandomUsersWithAvatars
    template:
     - name: archived

  - name: mediawiki/extensions/ReaderFeedback
    template:
     - name: archived

  - name: mediawiki/extensions/RecentActivityFeed
    template:
      - name: archived

  - name: mediawiki/extensions/Reflect
    template:
     - name: archived

  - name: mediawiki/extensions/RelationLinks
    template:
     - name: archived

  - name: mediawiki/extensions/RestBaseUpdateJobs
    template:
     - name: archived

  - name: mediawiki/extensions/RevealEmail
    template:
     - name: archived

  - name: mediawiki/extensions/SearchRealnames
    template:
     - name: archived

  - name: mediawiki/extensions/SecurePasswords
    template:
     - name: archived

  - name: mediawiki/extensions/SemanticComments
    template:
     - name: archived

  - name: mediawiki/extensions/SemanticExpressiveness
    template:
     - name: archived

  - name: mediawiki/extensions/SemanticHighcharts
    template:
     - name: archived

  - name: mediawiki/extensions/SemanticLinks
    template:
     - name: archived

  - name: mediawiki/extensions/SemanticMediaWiki
    template:
     - name: archived

  - name: mediawiki/extensions/SemanticPageMaker
    template:
     - name: archived

  - name: mediawiki/extensions/SemanticTasks
    template:
     - name: archived # Extension now on Github

  - name: mediawiki/extensions/SemanticTitle
    template:
     - name: archived

  - name: mediawiki/extensions/SemanticUpdateOnPurge
    template:
     - name: archived

  - name: mediawiki/extensions/SharedCssJs
    template:
     - name: archived

  - name: mediawiki/extensions/SimpleAntiSpam
    template:
     - name: archived

  - name: mediawiki/extensions/SimpleSurvey
    template:
     - name: archived

  - name: mediawiki/extensions/SkelJS
    template:
     - name: archived

  - name: mediawiki/extensions/Snippet
    template:
     - name: archived

  - name: mediawiki/extensions/SolrStore
    template:
     - name: archived

  - name: mediawiki/extensions/Spreadsheet
    template:
     - name: archived

  - name: mediawiki/extensions/StrategyWiki
    template:
     - name: archived

  - name: mediawiki/extensions/Suhosin
    template:
     - name: archived

  - name: mediawiki/extensions/SwarmExport
    template:
     - name: archived

  - name: mediawiki/extensions/SwiftCloudFiles
    template:
     - name: archived

  - name: mediawiki/extensions/TagContent
    template:
     - name: archived

  - name: mediawiki/extensions/ThemeDesigner
    template:
     - name: archived

  - name: mediawiki/extensions/ThumbParser
    template:
     - name: archived

  - name: mediawiki/extensions/TimezoneSelector
    template:
      - name: archived

  - name: mediawiki/extensions/TopLists
    template:
     - name: archived

  - name: mediawiki/extensions/Transliterator
    template:
     - name: archived

  - name: mediawiki/extensions/TwoFactorAuthentication
    template:
     - name: archived

  - name: mediawiki/extensions/UnitTest
    template:
     - name: archived

  - name: mediawiki/extensions/UploadLocal
    template:
     - name: archived

  - name: mediawiki/extensions/UserDailyContribs
    template:
     - name: archived

  - name: mediawiki/extensions/USERNAME
    template:
     - name: archived

  - name: mediawiki/extensions/UserSnoop
    template:
     - name: archived

  - name: mediawiki/extensions/Vector
    template:
     - name: archived

  - name: mediawiki/extensions/VectorBeta
    template:
     - name: archived

  - name: mediawiki/extensions/ViewFiles
    template:
      - name: archived

  - name: mediawiki/extensions/VisualChat
    template:
     - name: archived

  - name: mediawiki/extensions/WebCache
    template:
     - name: archived

  - name: mediawiki/extensions/WebPlatformAuth
    template:
     - name: archived

  - name: mediawiki/extensions/WikibaseJavaScriptApi
    template:
     - name: archived

  - name: mediawiki/extensions/WikibaseMobile
    template:
     - name: archived

  - name: mediawiki/extensions/WikibaseQuality
    template:
     - name: archived

  - name: mediawiki/extensions/WikibaseQualityExternalValidation
    template:
     - name: archived

  - name: mediawiki/extensions/WikibaseSolr
    template:
     - name: archived

  - name: mediawiki/extensions/Wikidata
    template:
     - name: archived

  - name: mediawiki/extensions/WikidataEntitySuggester
    template:
     - name: archived

  - name: mediawiki/extensions/WikiGrok
    template:
     - name: archived

  - name: mediawiki/extensions/WikiLabels
    template:
     - name: archived

  - name: mediawiki/extensions/WikimediaShopLink
    template:
     - name: archived

  - name: mediawiki/extensions/WikiObjectModel
    template:
     - name: archived

  - name: mediawiki/extensions/WikiPinger
    template:
     - name: archived

  - name: mediawiki/extensions/WikiShare
    template:
     - name: archived

  - name: mediawiki/extensions/WikiTwidget
    template:
     - name: archived

  - name: mediawiki/extensions/WikivoteMapsYandex
    template:
     - name: archived

  - name: mediawiki/extensions/Workflow
    template:
     - name: archived

  - name: mediawiki/extensions/XMLContentExtension
    template:
     - name: archived

  - name: mediawiki/extensions/ZeroBanner
    template:
     - name: archived

  - name: mediawiki/extensions/ZeroPortal
    template:
     - name: archived

  - name: mediawiki/extensions/ZeroRatedMobileAccess
    template:
     - name: archived

  - name: mediawiki/php/FastStringSearch
    template:
     - name: archived

  - name: mediawiki/services/citoid/deploy
    template:
     - name: archived

  - name: mediawiki/services/cxserver/deploy
    template:
     - name: archived

  - name: mediawiki/services/trending-edits
    template:
     - name: archived

  - name: mediawiki/services/trending-edits/deploy
    template:
     - name: archived

  - name: mediawiki/skins/CustomPage
    template:
     - name: archived

  - name: mediawiki/skins/DeepSea
    template:
     - name: archived

  - name: mediawiki/skins/Synagonism
    template:
     - name: archived

  - name: mediawiki/skins/VectorV2
    template:
     - name: archived

  - name: operations/debs/hhvm
    template:
     - name: archived

  - name: operations/debs/nodepool
    template:
     - name: archived

  - name: operations/debs/wikimedia-job-runner
    template:
     - name: archived

  - name: operations/puppet/cdh
    template:
     - name: archived

  - name: operations/puppet/cdh4
    template:
     - name: archived

  - name: operations/puppet/jmxtrans
    template:
     - name: archived

  - name: operations/puppet/kafka
    template:
     - name: archived

  - name: operations/puppet/kafkatee
    template:
     - name: archived

  - name: operations/puppet/mariadb
    template:
     - name: archived

  - name: operations/puppet/mesos
    template:
     - name: archived

  - name: operations/puppet/nginx
    template:
     - name: archived

  - name: operations/puppet/varnishkafka
    template:
     - name: archived

  - name: operations/puppet/wikimetrics
    template:
     - name: archived

  - name: operations/puppet/zookeeper
    template:
     - name: archived

  - name: operations/software/analytics-eventlogging-maintenance
    template:
     - name: archived

  - name: operations/software/brrd
    template:
     - name: archived

  - name: performance/WebPageTest
    template:
     - name: archived

  - name: performance/perflogbot
    template:
     - name: archived

  - name: pywikibot/compat
    template:
     - name: archived

  - name: search/ltr
    template:
     - name: archived

  - name: search/repository-swift
    template:
     - name: archived

  - name: sink_nova_fixed_multi
    template:
     - name: archived

  - name: sink_nova_ldap
    template:
     - name: archived

  - name: wikibase/wikiba.se
    template:
     - name: archived

  - name: wikidata/build-resources
    template:
     - name: archived
